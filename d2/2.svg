<?xml version="1.0" encoding="utf-8"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" d2Version="v0.6.5" preserveAspectRatio="xMinYMin meet" viewBox="0 0 1479 1824"><svg id="d2-svg" class="d2-4082930735" width="1479" height="1824" viewBox="-89 -49 1479 1824"><rect x="-89.000000" y="-49.000000" width="1479.000000" height="1824.000000" rx="0.000000" class=" fill-N7" stroke-width="0" /><style type="text/css"><![CDATA[.d2-4082930735 .text {}@font-face {}.d2-4082930735 .text-italic {}@font-face {}]]></style><style type="text/css"><![CDATA[.shape { shape-rendering: geometricPrecision; stroke-linejoin: round;}.connection { stroke-linecap: round; stroke-linejoin: round;}.blend { mix-blend-mode: multiply; opacity: 0.5;} .d2-4082930735 .fill-N1{fill:#0A0F25;} .d2-4082930735 .fill-N2{fill:#676C7E;} .d2-4082930735 .fill-N3{fill:#9499AB;} .d2-4082930735 .fill-N4{fill:#CFD2DD;} .d2-4082930735 .fill-N5{fill:#DEE1EB;} .d2-4082930735 .fill-N6{fill:#EEF1F8;} .d2-4082930735 .fill-N7{fill:#FFFFFF;} .d2-4082930735 .fill-B1{fill:#0D32B2;} .d2-4082930735 .fill-B2{fill:#0D32B2;} .d2-4082930735 .fill-B3{fill:#E3E9FD;} .d2-4082930735 .fill-B4{fill:#E3E9FD;} .d2-4082930735 .fill-B5{fill:#EDF0FD;} .d2-4082930735 .fill-B6{fill:#F7F8FE;} .d2-4082930735 .fill-AA2{fill:#4A6FF3;} .d2-4082930735 .fill-AA4{fill:#EDF0FD;} .d2-4082930735 .fill-AA5{fill:#F7F8FE;} .d2-4082930735 .fill-AB4{fill:#EDF0FD;} .d2-4082930735 .fill-AB5{fill:#F7F8FE;} .d2-4082930735 .stroke-N1{stroke:#0A0F25;} .d2-4082930735 .stroke-N2{stroke:#676C7E;} .d2-4082930735 .stroke-N3{stroke:#9499AB;} .d2-4082930735 .stroke-N4{stroke:#CFD2DD;} .d2-4082930735 .stroke-N5{stroke:#DEE1EB;} .d2-4082930735 .stroke-N6{stroke:#EEF1F8;} .d2-4082930735 .stroke-N7{stroke:#FFFFFF;} .d2-4082930735 .stroke-B1{stroke:#0D32B2;} .d2-4082930735 .stroke-B2{stroke:#0D32B2;} .d2-4082930735 .stroke-B3{stroke:#E3E9FD;} .d2-4082930735 .stroke-B4{stroke:#E3E9FD;} .d2-4082930735 .stroke-B5{stroke:#EDF0FD;} .d2-4082930735 .stroke-B6{stroke:#F7F8FE;} .d2-4082930735 .stroke-AA2{stroke:#4A6FF3;} .d2-4082930735 .stroke-AA4{stroke:#EDF0FD;} .d2-4082930735 .stroke-AA5{stroke:#F7F8FE;} .d2-4082930735 .stroke-AB4{stroke:#EDF0FD;} .d2-4082930735 .stroke-AB5{stroke:#F7F8FE;} .d2-4082930735 .background-color-N1{background-color:#0A0F25;} .d2-4082930735 .background-color-N2{background-color:#676C7E;} .d2-4082930735 .background-color-N3{background-color:#9499AB;} .d2-4082930735 .background-color-N4{background-color:#CFD2DD;} .d2-4082930735 .background-color-N5{background-color:#DEE1EB;} .d2-4082930735 .background-color-N6{background-color:#EEF1F8;} .d2-4082930735 .background-color-N7{background-color:#FFFFFF;} .d2-4082930735 .background-color-B1{background-color:#0D32B2;} .d2-4082930735 .background-color-B2{background-color:#0D32B2;} .d2-4082930735 .background-color-B3{background-color:#E3E9FD;} .d2-4082930735 .background-color-B4{background-color:#E3E9FD;} .d2-4082930735 .background-color-B5{background-color:#EDF0FD;} .d2-4082930735 .background-color-B6{background-color:#F7F8FE;} .d2-4082930735 .background-color-AA2{background-color:#4A6FF3;} .d2-4082930735 .background-color-AA4{background-color:#EDF0FD;} .d2-4082930735 .background-color-AA5{background-color:#F7F8FE;} .d2-4082930735 .background-color-AB4{background-color:#EDF0FD;} .d2-4082930735 .background-color-AB5{background-color:#F7F8FE;} .d2-4082930735 .color-N1{color:#0A0F25;} .d2-4082930735 .color-N2{color:#676C7E;} .d2-4082930735 .color-N3{color:#9499AB;} .d2-4082930735 .color-N4{color:#CFD2DD;} .d2-4082930735 .color-N5{color:#DEE1EB;} .d2-4082930735 .color-N6{color:#EEF1F8;} .d2-4082930735 .color-N7{color:#FFFFFF;} .d2-4082930735 .color-B1{color:#0D32B2;} .d2-4082930735 .color-B2{color:#0D32B2;} .d2-4082930735 .color-B3{color:#E3E9FD;} .d2-4082930735 .color-B4{color:#E3E9FD;} .d2-4082930735 .color-B5{color:#EDF0FD;} .d2-4082930735 .color-B6{color:#F7F8FE;} .d2-4082930735 .color-AA2{color:#4A6FF3;} .d2-4082930735 .color-AA4{color:#EDF0FD;} .d2-4082930735 .color-AA5{color:#F7F8FE;} .d2-4082930735 .color-AB4{color:#EDF0FD;} .d2-4082930735 .color-AB5{color:#F7F8FE;}.appendix text.text{fill:#0A0F25}.md{--color-fg-default:#0A0F25;--color-fg-muted:#676C7E;--color-fg-subtle:#9499AB;--color-canvas-default:#FFFFFF;--color-canvas-subtle:#EEF1F8;--color-border-default:#0D32B2;--color-border-muted:#0D32B2;--color-neutral-muted:#EEF1F8;--color-accent-fg:#0D32B2;--color-accent-emphasis:#0D32B2;--color-attention-subtle:#676C7E;--color-danger-fg:red;}.sketch-overlay-B1{fill:url(#streaks-darker);mix-blend-mode:lighten}.sketch-overlay-B2{fill:url(#streaks-darker);mix-blend-mode:lighten}.sketch-overlay-B3{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-B4{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-B5{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-B6{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-AA2{fill:url(#streaks-dark);mix-blend-mode:overlay}.sketch-overlay-AA4{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-AA5{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-AB4{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-AB5{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-N1{fill:url(#streaks-darker);mix-blend-mode:lighten}.sketch-overlay-N2{fill:url(#streaks-dark);mix-blend-mode:overlay}.sketch-overlay-N3{fill:url(#streaks-normal);mix-blend-mode:color-burn}.sketch-overlay-N4{fill:url(#streaks-normal);mix-blend-mode:color-burn}.sketch-overlay-N5{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-N6{fill:url(#streaks-bright);mix-blend-mode:darken}.sketch-overlay-N7{fill:url(#streaks-bright);mix-blend-mode:darken}.light-code{display: block}.dark-code{display: none}]]></style><g id="o"><g class="shape" ><rect x="12.000000" y="52.000000" width="152.000000" height="66.000000" class=" stroke-B1 fill-B5" style="stroke-width:2;" /></g><text x="88.000000" y="90.500000" class="text fill-N1" style="text-anchor:middle;font-size:16px">Resource owner</text></g><g id="c"><g class="shape" ><rect x="318.000000" y="52.000000" width="100.000000" height="66.000000" class=" stroke-B1 fill-B5" style="stroke-width:2;" /></g><text x="368.000000" y="90.500000" class="text fill-N1" style="text-anchor:middle;font-size:16px">Client</text></g><g id="rs"><g class="shape" ><rect x="572.000000" y="52.000000" width="151.000000" height="66.000000" class=" stroke-B1 fill-B5" style="stroke-width:2;" /></g><text x="647.500000" y="90.500000" class="text fill-N1" style="text-anchor:middle;font-size:16px">Resource server</text></g><g id="as"><g class="shape" ><rect x="763.000000" y="52.000000" width="182.000000" height="66.000000" class=" stroke-B1 fill-B5" style="stroke-width:2;" /></g><text x="854.000000" y="90.500000" class="text fill-N1" style="text-anchor:middle;font-size:16px">Authorization server</text></g><g id="(o -- )[0]"><path d="M 88.000000 120.000000 L 88.000000 1673.000000" fill="none" class="connection stroke-B2" style="stroke-width:2;stroke-dasharray:12.000000,11.838767;" mask="url(#d2-4082930735)" /></g><g id="(c -- )[0]"><path d="M 368.000000 120.000000 L 368.000000 1673.000000" fill="none" class="connection stroke-B2" style="stroke-width:2;stroke-dasharray:12.000000,11.838767;" mask="url(#d2-4082930735)" /></g><g id="(rs -- )[0]"><path d="M 647.500000 120.000000 L 647.500000 1673.000000" fill="none" class="connection stroke-B2" style="stroke-width:2;stroke-dasharray:12.000000,11.838767;" mask="url(#d2-4082930735)" /></g><g id="(as -- )[0]"><path d="M 854.000000 120.000000 L 854.000000 1673.000000" fill="none" class="connection stroke-B2" style="stroke-width:2;stroke-dasharray:12.000000,11.838767;" mask="url(#d2-4082930735)" /></g><g id="토큰 발급"><g class="shape blend" ><rect x="48.000000" y="173.000000" width="1242.000000" height="1137.000000" class=" stroke-B1 fill-N5" style="stroke-width:0;" /></g><rect x="53.000000" y="178.000000" width="81.000000" height="21.000000" class=" fill-N5" /><text x="93.500000" y="194.000000" class="text fill-N1" style="text-anchor:middle;font-size:16px">토큰 발급</text></g><g id="토큰 사용"><g class="shape blend" ><rect x="328.000000" y="1350.000000" width="566.000000" height="269.000000" class=" stroke-B1 fill-N5" style="stroke-width:0;" /></g><rect x="333.000000" y="1355.000000" width="81.000000" height="21.000000" class=" fill-N5" /><text x="373.500000" y="1371.000000" class="text fill-N1" style="text-anchor:middle;font-size:16px">토큰 사용</text></g><g id="(c -&gt; as)[0]"><marker id="mk-3488378134" markerWidth="10.000000" markerHeight="12.000000" refX="7.000000" refY="6.000000" viewBox="0.000000 0.000000 10.000000 12.000000" orient="auto" markerUnits="userSpaceOnUse"> <polygon points="0.000000,0.000000 10.000000,6.000000 0.000000,12.000000" class="connection fill-B1" stroke-width="2" /> </marker><path d="M 370.000000 217.000000 L 850.000000 217.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-3488378134)" mask="url(#d2-4082930735)" /><text x="611.500000" y="223.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">권한 요청</text></g><g id="(as -&gt; o)[0]"><path d="M 852.000000 287.000000 L 92.000000 287.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-3488378134)" mask="url(#d2-4082930735)" /><text x="471.500000" y="293.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">권한 요청</text></g><g id="(o -&gt; as)[0]"><path d="M 90.000000 357.000000 L 850.000000 357.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-3488378134)" mask="url(#d2-4082930735)" /><text x="471.500000" y="363.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">권한 승인</text></g><g id="(as -&gt; c)[0]"><path d="M 852.000000 427.000000 L 372.000000 427.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-3488378134)" mask="url(#d2-4082930735)" /><text x="611.500000" y="433.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">권한 승인</text></g><g id="(c -&gt; as)[1]"><path d="M 370.000000 785.000000 L 850.000000 785.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-3488378134)" mask="url(#d2-4082930735)" /><text x="611.500000" y="791.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">토큰 요청</text></g><g id="(as -&gt; c)[1]"><path d="M 852.000000 1143.000000 L 372.000000 1143.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-3488378134)" mask="url(#d2-4082930735)" /><text x="611.500000" y="1149.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">토큰 발행</text></g><g id="(c -&gt; rs)[0]"><path d="M 370.000000 1394.000000 L 643.500000 1394.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-3488378134)" mask="url(#d2-4082930735)" /><text x="507.500000" y="1400.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">자원 요청</text></g><g id="(rs -&gt; as)[0]"><path d="M 649.500000 1464.000000 L 850.000000 1464.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-3488378134)" mask="url(#d2-4082930735)" /><text x="751.000000" y="1470.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">토큰 검증 요청</text></g><g id="(as -&gt; rs)[0]"><path d="M 852.000000 1534.000000 L 651.500000 1534.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-3488378134)" mask="url(#d2-4082930735)" /><text x="750.500000" y="1540.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">토큰 검증</text></g><g id="(rs -&gt; c)[0]"><path d="M 645.500000 1604.000000 L 372.000000 1604.000000" fill="none" class="connection stroke-B1" style="stroke-width:2;" marker-end="url(#mk-3488378134)" mask="url(#d2-4082930735)" /><text x="507.500000" y="1610.000000" class="text-italic fill-N2" style="text-anchor:middle;font-size:16px">자원 전송</text></g><g id="as.&#34;리디렉션을 이용한 경우, Authorization server의 응답이 url에 존재하므로\n앱 서버에서 먼저 처리한 다음 별도 url로 리디렉션하는 것이 좋다&#34;"><g class="shape" ><path d="M 548 497 H 1140 C 1141 497 1142 497 1143 498 L 1160 514 C 1161 515 1161 516 1161 517 V 579 C 1161 579 1161 579 1161 579 H 548 C 547 579 547 579 547 579 V 498 C 547 497 547 497 548 497 Z" class=" stroke-B1 fill-N7" style="stroke-width:2;" /><path d="M 1160 579 H 548 C 547 579 547 579 547 578 V 498 C 547 497 547 497 548 497 H 1139 C 1140 497 1140 497 1140 498 V 515 C 1140 516 1141 517 1142 517 H 1160 C 1161 517 1161 517 1161 518 V 578 C 1160 579 1161 579 1160 579 Z" class=" stroke-B1 fill-N7" style="stroke-width:2;" /></g><text x="854.000000" y="535.500000" class="text fill-N1" style="text-anchor:middle;font-size:16px"><tspan x="854.000000" dy="0.000000">리디렉션을 이용한 경우, Authorization server의 응답이 url에 존재하므로</tspan><tspan x="854.000000" dy="18.500000">앱 서버에서 먼저 처리한 다음 별도 url로 리디렉션하는 것이 좋다</tspan></text></g><g id="c.Client는 authorization code를 받는다"><g class="shape" ><path d="M 211 649 H 505 C 506 649 507 649 508 650 L 525 666 C 526 667 526 668 526 669 V 715 C 526 715 526 715 526 715 H 211 C 210 715 210 715 210 715 V 650 C 210 649 210 649 211 649 Z" class=" stroke-B1 fill-N7" style="stroke-width:2;" /><path d="M 525 715 H 211 C 210 715 210 715 210 714 V 650 C 210 649 210 649 211 649 H 504 C 505 649 505 649 505 650 V 667 C 505 668 506 669 507 669 H 525 C 526 669 526 669 526 670 V 714 C 525 715 526 715 525 715 Z" class=" stroke-B1 fill-N7" style="stroke-width:2;" /></g><text x="368.000000" y="687.500000" class="text fill-N1" style="text-anchor:middle;font-size:16px">Client는 authorization code를 받는다</text></g><g id="c.authorization code + secret을 요청에 포함"><g class="shape" ><path d="M 193 855 H 522 C 523 855 524 855 525 856 L 542 872 C 543 873 543 874 543 875 V 921 C 543 921 543 921 543 921 H 193 C 192 921 192 921 192 921 V 856 C 192 855 192 855 193 855 Z" class=" stroke-B1 fill-N7" style="stroke-width:2;" /><path d="M 542 921 H 193 C 192 921 192 921 192 920 V 856 C 192 855 192 855 193 855 H 521 C 522 855 522 855 522 856 V 873 C 522 874 523 875 524 875 H 542 C 543 875 543 875 543 876 V 920 C 542 921 543 921 542 921 Z" class=" stroke-B1 fill-N7" style="stroke-width:2;" /></g><text x="367.500000" y="893.500000" class="text fill-N1" style="text-anchor:middle;font-size:16px">authorization code + secret을 요청에 포함</text></g><g id="c.&#34;Client는 미리 Authorization server에 등록되거나,\n요청 내 정보로 검증되어 신뢰할 수 있음이 보장된다&#34;"><g class="shape" ><path d="M 129 991 H 586 C 587 991 588 991 589 992 L 606 1008 C 607 1009 607 1010 607 1011 V 1073 C 607 1073 607 1073 607 1073 H 129 C 128 1073 128 1073 128 1073 V 992 C 128 991 128 991 129 991 Z" class=" stroke-B1 fill-N7" style="stroke-width:2;" /><path d="M 606 1073 H 129 C 128 1073 128 1073 128 1072 V 992 C 128 991 128 991 129 991 H 585 C 586 991 586 991 586 992 V 1009 C 586 1010 587 1011 588 1011 H 606 C 607 1011 607 1011 607 1012 V 1072 C 606 1073 607 1073 606 1073 Z" class=" stroke-B1 fill-N7" style="stroke-width:2;" /></g><text x="367.500000" y="1029.500000" class="text fill-N1" style="text-anchor:middle;font-size:16px"><tspan x="367.500000" dy="0.000000">Client는 미리 Authorization server에 등록되거나,</tspan><tspan x="367.500000" dy="18.500000">요청 내 정보로 검증되어 신뢰할 수 있음이 보장된다</tspan></text></g><g id="as.&#34;access token + refresh token\nrefresh token은 access token 만료 등의 사유로 신규 access token을 발급받기 위해 요청할 때 사용&#34;"><g class="shape" ><path d="M 459 1213 H 1229 C 1230 1213 1231 1213 1232 1214 L 1249 1230 C 1250 1231 1250 1232 1250 1233 V 1295 C 1250 1295 1250 1295 1250 1295 H 459 C 458 1295 458 1295 458 1295 V 1214 C 458 1213 458 1213 459 1213 Z" class=" stroke-B1 fill-N7" style="stroke-width:2;" /><path d="M 1249 1295 H 459 C 458 1295 458 1295 458 1294 V 1214 C 458 1213 458 1213 459 1213 H 1228 C 1229 1213 1229 1213 1229 1214 V 1231 C 1229 1232 1230 1233 1231 1233 H 1249 C 1250 1233 1250 1233 1250 1234 V 1294 C 1249 1295 1250 1295 1249 1295 Z" class=" stroke-B1 fill-N7" style="stroke-width:2;" /></g><text x="854.000000" y="1251.500000" class="text fill-N1" style="text-anchor:middle;font-size:16px"><tspan x="854.000000" dy="0.000000">access token + refresh token</tspan><tspan x="854.000000" dy="18.500000">refresh token은 access token 만료 등의 사유로 신규 access token을 발급받기 위해 요청할 때 사용</tspan></text></g><mask id="d2-4082930735" maskUnits="userSpaceOnUse" x="-89" y="-49" width="1479" height="1824"><rect x="-89" y="-49" width="1479" height="1824" fill="white"></rect><rect x="34.500000" y="74.500000" width="107" height="21" fill="rgba(0,0,0,0.75)"></rect><rect x="348.000000" y="74.500000" width="40" height="21" fill="rgba(0,0,0,0.75)"></rect><rect x="594.500000" y="74.500000" width="106" height="21" fill="rgba(0,0,0,0.75)"></rect><rect x="785.500000" y="74.500000" width="137" height="21" fill="rgba(0,0,0,0.75)"></rect><rect x="53.000000" y="178.000000" width="81" height="16" fill="black"></rect><rect x="333.000000" y="1355.000000" width="81" height="16" fill="black"></rect><rect x="571.000000" y="207.000000" width="81" height="21" fill="black"></rect><rect x="431.000000" y="277.000000" width="81" height="21" fill="black"></rect><rect x="431.000000" y="347.000000" width="81" height="21" fill="black"></rect><rect x="571.000000" y="417.000000" width="81" height="21" fill="black"></rect><rect x="571.000000" y="775.000000" width="81" height="21" fill="black"></rect><rect x="571.000000" y="1133.000000" width="81" height="21" fill="black"></rect><rect x="467.000000" y="1384.000000" width="81" height="21" fill="black"></rect><rect x="690.000000" y="1454.000000" width="122" height="21" fill="black"></rect><rect x="710.000000" y="1524.000000" width="81" height="21" fill="black"></rect><rect x="467.000000" y="1594.000000" width="81" height="21" fill="black"></rect><rect x="569.500000" y="519.500000" width="569" height="37" fill="rgba(0,0,0,0.75)"></rect><rect x="232.500000" y="671.500000" width="271" height="21" fill="rgba(0,0,0,0.75)"></rect><rect x="214.500000" y="877.500000" width="306" height="21" fill="rgba(0,0,0,0.75)"></rect><rect x="150.500000" y="1013.500000" width="434" height="37" fill="rgba(0,0,0,0.75)"></rect><rect x="480.500000" y="1235.500000" width="747" height="37" fill="rgba(0,0,0,0.75)"></rect></mask></svg></svg>