<?php
header('Content-Type: text/html; charset=utf-8');
setlocale(LC_TIME, "kr_KR.utf8");
date_default_timezone_set('Asia/Seoul');

$server_root_path = $_SERVER['DOCUMENT_ROOT'];
include $server_root_path.'/lib/create_code_page.php';

putHeader();
putTitle("Browser Object Model");
?>

<p>브라우저와 관련된 객체 : window, location, navigator, history, screen, document</p>

<button onclick="func1()">window 1</button>
<button onclick="func2()">window 2</button>
<button onclick="func3()">window 3</button>
<button onclick="func4()">window 4, screen</button>
<button onclick="func5()">location</button>
<button onclick="func6()">navigator</button>
<script>
	function func1() {
		// 새 window 객체 생성
		// window.open(url?: string, target?: string, features?: string, replace?: boolean);
		// https://www.w3schools.com/jsref/met_win_open.asp
		var newWindow = window.open("about:Blank", 'newWindow',
			'width=480, height=272, resizable=1', true);
		if (newWindow) {
			var i = 3;
			var func = function () {
				var node = document.createElement('h1');
				node.appendChild(document.createTextNode("Wait a minute..."));
				console.log(newWindow.document.getElementsByTagName('body')[0]);
				newWindow.document.getElementsByTagName('body')[0].appendChild(node);
				if (--i > 0) {
					setTimeout(func, 1000);
				}
			};
			setTimeout(func, 1000);
		} else {
			window.alert('팝업 차단으로 창 생성 불가');
		}
	}
	function func2() {
		var newWindow = window.open("http://wiz.pe.hu", 'newWindow',
			'width=480, height=272, resizable=1', true);
		if (newWindow) {
			console.log(newWindow.name);
			var node = document.createElement('h1');
			node.appendChild(document.createTextNode("Wait a minute..."));
			console.log(newWindow.document.getElementsByTagName('body')[0]);
			newWindow.document.getElementsByTagName('body')[0].appendChild(node);
		} else {
			window.alert('팝업 차단으로 창 생성 불가');
		}
	}
	function func3() {
		window.setInterval(function () {
			console.log('Hello');
		}, 1000);
	}
	async function func4() {
		var newWindow = window.open('', '', 'width=480, height=272, resizable=1', true);
		await sleep(1000);
		newWindow.moveTo(100, 200);
		await sleep(1000);
		newWindow.resizeTo(800, 600);
		await sleep(1000);
		console.log(screen.width + ', ' + screen.height);
		newWindow.resizeTo(screen.width, screen.height);
	}
	function sleep(ms) {
		return new Promise(resolve => setTimeout(resolve, ms));
	}
	async function func5() {
		var href = location.href
		console.log(href);
		console.log(location.protocol);
		console.log(location.host);
		console.log(location.hostname);
		console.log(location.port);
		console.log(location.pathname);
		console.log(location.search);
		//location.href = 'http://google.com';
		//location.assign(href);
		//location.replace(href);
		await sleep(1000);
		location.reload();
	}
	function func6() {
		console.log(navigator.appCodeName);
		console.log(navigator.appName);
		console.log(navigator.appVersion);
		console.log(navigator.platform);
	}
</script>

<pre style="background:#0c1021;color:#f8f8f8"><span style="color:#fbde2d">function</span> <span style="color:#ff6400">func1</span>() {
    <span style="color:#aeaeae">// 새 window 객체 생성</span>
    <span style="color:#aeaeae">// window.open(url?: string, target?: string, features?: string, replace?: boolean);</span>
    <span style="color:#aeaeae">// https://www.w3schools.com/jsref/met_win_open.asp</span>
    <span style="color:#fbde2d">var</span> newWindow <span style="color:#fbde2d">=</span> <span style="color:#8da6ce">window</span>.<span style="color:#8da6ce">open</span>(<span style="color:#61ce3c">"about:Blank"</span>, <span style="color:#61ce3c">'newWindow'</span>,
        <span style="color:#61ce3c">'width=480, height=272, resizable=1'</span>, <span style="color:#d8fa3c">true</span>);
    <span style="color:#fbde2d">if</span> (newWindow) {
        <span style="color:#fbde2d">var</span> i <span style="color:#fbde2d">=</span> <span style="color:#d8fa3c">3</span>;
        <span style="color:#fbde2d">var</span> <span style="color:#ff6400">func</span> <span style="color:#fbde2d">=</span> <span style="color:#fbde2d">function</span> () {
            <span style="color:#fbde2d">var</span> node <span style="color:#fbde2d">=</span> <span style="color:#8da6ce">document</span>.<span style="color:#8da6ce">createElement</span>(<span style="color:#61ce3c">'h1'</span>);
            node.<span style="color:#8da6ce">appendChild</span>(<span style="color:#8da6ce">document</span>.<span style="color:#8da6ce">createTextNode</span>(<span style="color:#61ce3c">"Wait a minute..."</span>));
            <span style="color:#ff6400">console</span><span style="color:#8da6ce">.log</span>(newWindow.<span style="color:#8da6ce">document</span>.<span style="color:#8da6ce">getElementsByTagName</span>(<span style="color:#61ce3c">'body'</span>)[<span style="color:#d8fa3c">0</span>]);
            newWindow.<span style="color:#8da6ce">document</span>.<span style="color:#8da6ce">getElementsByTagName</span>(<span style="color:#61ce3c">'body'</span>)[<span style="color:#d8fa3c">0</span>].<span style="color:#8da6ce">appendChild</span>(node);
            <span style="color:#fbde2d">if</span> (<span style="color:#fbde2d">--</span>i <span style="color:#fbde2d">></span> <span style="color:#d8fa3c">0</span>) {
                <span style="color:#8da6ce">setTimeout</span>(func, <span style="color:#d8fa3c">1000</span>);
            }
        };
        <span style="color:#8da6ce">setTimeout</span>(func, <span style="color:#d8fa3c">1000</span>);
    } <span style="color:#fbde2d">else</span> {
        <span style="color:#8da6ce">window</span>.<span style="color:#8da6ce">alert</span>(<span style="color:#61ce3c">'팝업 차단으로 창 생성 불가'</span>);
    }
}
<span style="color:#fbde2d">function</span> <span style="color:#ff6400">func2</span>() {
    <span style="color:#fbde2d">var</span> newWindow <span style="color:#fbde2d">=</span> <span style="color:#8da6ce">window</span>.<span style="color:#8da6ce">open</span>(<span style="color:#61ce3c">"http://wiz.pe.hu"</span>, <span style="color:#61ce3c">'newWindow'</span>,
        <span style="color:#61ce3c">'width=480, height=272, resizable=1'</span>, <span style="color:#d8fa3c">true</span>);
    <span style="color:#fbde2d">if</span> (newWindow) {
        <span style="color:#ff6400">console</span><span style="color:#8da6ce">.log</span>(newWindow.<span style="color:#8da6ce">name</span>);
        <span style="color:#fbde2d">var</span> node <span style="color:#fbde2d">=</span> <span style="color:#8da6ce">document</span>.<span style="color:#8da6ce">createElement</span>(<span style="color:#61ce3c">'h1'</span>);
        node.<span style="color:#8da6ce">appendChild</span>(<span style="color:#8da6ce">document</span>.<span style="color:#8da6ce">createTextNode</span>(<span style="color:#61ce3c">"Wait a minute..."</span>));
        <span style="color:#ff6400">console</span><span style="color:#8da6ce">.log</span>(newWindow.<span style="color:#8da6ce">document</span>.<span style="color:#8da6ce">getElementsByTagName</span>(<span style="color:#61ce3c">'body'</span>)[<span style="color:#d8fa3c">0</span>]);
        newWindow.<span style="color:#8da6ce">document</span>.<span style="color:#8da6ce">getElementsByTagName</span>(<span style="color:#61ce3c">'body'</span>)[<span style="color:#d8fa3c">0</span>].<span style="color:#8da6ce">appendChild</span>(node);
    } <span style="color:#fbde2d">else</span> {
        <span style="color:#8da6ce">window</span>.<span style="color:#8da6ce">alert</span>(<span style="color:#61ce3c">'팝업 차단으로 창 생성 불가'</span>);
    }
}
<span style="color:#fbde2d">function</span> <span style="color:#ff6400">func3</span>() {
    <span style="color:#8da6ce">window</span>.<span style="color:#8da6ce">setInterval</span>(<span style="color:#fbde2d">function</span> () {
        <span style="color:#ff6400">console</span><span style="color:#8da6ce">.log</span>(<span style="color:#61ce3c">'Hello'</span>);
    }, <span style="color:#d8fa3c">1000</span>);
}
async <span style="color:#fbde2d">function</span> <span style="color:#ff6400">func4</span>() {
    <span style="color:#fbde2d">var</span> newWindow <span style="color:#fbde2d">=</span> <span style="color:#8da6ce">window</span>.<span style="color:#8da6ce">open</span>(<span style="color:#61ce3c">''</span>, <span style="color:#61ce3c">''</span>, <span style="color:#61ce3c">'width=480, height=272, resizable=1'</span>, <span style="color:#d8fa3c">true</span>);
    await sleep(<span style="color:#d8fa3c">1000</span>);
    newWindow.<span style="color:#8da6ce">moveTo</span>(<span style="color:#d8fa3c">100</span>, <span style="color:#d8fa3c">200</span>);
    await sleep(<span style="color:#d8fa3c">1000</span>);
    newWindow.<span style="color:#8da6ce">resizeTo</span>(<span style="color:#d8fa3c">800</span>, <span style="color:#d8fa3c">600</span>);
    await sleep(<span style="color:#d8fa3c">1000</span>);
    <span style="color:#ff6400">console</span><span style="color:#8da6ce">.log</span>(<span style="color:#8da6ce">screen</span>.<span style="color:#8da6ce">width</span> <span style="color:#fbde2d">+</span> <span style="color:#61ce3c">', '</span> <span style="color:#fbde2d">+</span> <span style="color:#8da6ce">screen</span>.<span style="color:#8da6ce">height</span>);
    newWindow.<span style="color:#8da6ce">resizeTo</span>(<span style="color:#8da6ce">screen</span>.<span style="color:#8da6ce">width</span>, <span style="color:#8da6ce">screen</span>.<span style="color:#8da6ce">height</span>);
}
<span style="color:#fbde2d">function</span> <span style="color:#ff6400">sleep</span>(ms) {
    <span style="color:#fbde2d">return</span> <span style="color:#fbde2d">new</span> <span style="color:#ff6400">Promise</span>(resolve <span style="color:#fbde2d">=</span><span style="color:#fbde2d">></span> <span style="color:#8da6ce">setTimeout</span>(resolve, ms));
}
async <span style="color:#fbde2d">function</span> <span style="color:#ff6400">func5</span>() {
    <span style="color:#fbde2d">var</span> href <span style="color:#fbde2d">=</span> location.<span style="color:#8da6ce">href</span>
    <span style="color:#ff6400">console</span><span style="color:#8da6ce">.log</span>(href);
    <span style="color:#ff6400">console</span><span style="color:#8da6ce">.log</span>(location.<span style="color:#8da6ce">protocol</span>);
    <span style="color:#ff6400">console</span><span style="color:#8da6ce">.log</span>(location.<span style="color:#8da6ce">host</span>);
    <span style="color:#ff6400">console</span><span style="color:#8da6ce">.log</span>(location.<span style="color:#8da6ce">hostname</span>);
    <span style="color:#ff6400">console</span><span style="color:#8da6ce">.log</span>(location.<span style="color:#8da6ce">port</span>);
    <span style="color:#ff6400">console</span><span style="color:#8da6ce">.log</span>(location.<span style="color:#8da6ce">pathname</span>);
    <span style="color:#ff6400">console</span><span style="color:#8da6ce">.log</span>(location.search);
    <span style="color:#aeaeae">//location.href = 'http://google.com';</span>
    <span style="color:#aeaeae">//location.assign(href);</span>
    <span style="color:#aeaeae">//location.replace(href);</span>
    await sleep(<span style="color:#d8fa3c">1000</span>);
    location.<span style="color:#8da6ce">reload</span>();
}
<span style="color:#fbde2d">function</span> <span style="color:#ff6400">func6</span>() {
    <span style="color:#ff6400">console</span><span style="color:#8da6ce">.log</span>(<span style="color:#8da6ce">navigator</span>.<span style="color:#8da6ce">appCodeName</span>);
    <span style="color:#ff6400">console</span><span style="color:#8da6ce">.log</span>(<span style="color:#8da6ce">navigator</span>.<span style="color:#8da6ce">appName</span>);
    <span style="color:#ff6400">console</span><span style="color:#8da6ce">.log</span>(<span style="color:#8da6ce">navigator</span>.<span style="color:#8da6ce">appVersion</span>);
    <span style="color:#ff6400">console</span><span style="color:#8da6ce">.log</span>(<span style="color:#8da6ce">navigator</span>.<span style="color:#8da6ce">platform</span>);
}
</pre>

<?php
putFooter();
?>

