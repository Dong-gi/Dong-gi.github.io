<?php
header('Content-Type: text/html; charset=utf-8');
setlocale(LC_TIME, "kr_KR.utf8");
date_default_timezone_set('Asia/Seoul');

$server_root_path = $_SERVER['DOCUMENT_ROOT'];
include $server_root_path.'/lib/create_code_page.php';

putHeader();
putTitle("Cookie");
?>

<input type="text" id="cname" value="쿠키 이름"/>
<input type="text" id="cvalue" value="쿠키 값"/>
<input type="text" id="exdays" value="유효 기간"/>
<button onclick="func1()">쿠키 생성</button>
<button onclick="func2()">쿠키 제거</button>
<button onclick="func3()">쿠키 값 확인</button>
<button onclick="showCookie()">전체 쿠키 확인</button>
<script>
	// https://www.w3schools.com/js/js_cookies.asp
	function setCookie(cname, cvalue, exdays) {
		var d = new Date();
		d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
		var expires = "expires=" + d.toUTCString();
		document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
	}
	function getCookie(cname) {
		var value = document.cookie.match(new RegExp(cname + '.*;?', 'gm'));
		if(!!value) {
			value = value['0'].replace((cname + '=')|(';'), '');
		}
		return value;
	}
	function showCookie() {
		alert(document.cookie);
	}
	function func1() {
		setCookie(jQuery('#cname').val()
		, jQuery('#cvalue').val()
		, jQuery('#exdays').val());
	}
	function func2() {
		setCookie(jQuery('#cname').val(), '', -1);
	}
	function func3() {
		alert(getCookie(jQuery('#cname').val()));
	}
</script>

<pre style="background:#0c1021;color:#f8f8f8"><span style="color:#aeaeae">// https://www.w3schools.com/js/js_cookies.asp</span>
<span style="color:#fbde2d">function</span> <span style="color:#ff6400">setCookie</span>(cname, cvalue, exdays) {
    <span style="color:#fbde2d">var</span> d <span style="color:#fbde2d">=</span> <span style="color:#fbde2d">new</span> <span style="color:#ff6400">Date</span>();
    d.<span style="color:#8da6ce">setTime</span>(d.<span style="color:#8da6ce">getTime</span>() <span style="color:#fbde2d">+</span> (exdays <span style="color:#fbde2d">*</span> <span style="color:#d8fa3c">24</span> <span style="color:#fbde2d">*</span> <span style="color:#d8fa3c">60</span> <span style="color:#fbde2d">*</span> <span style="color:#d8fa3c">60</span> <span style="color:#fbde2d">*</span> <span style="color:#d8fa3c">1000</span>));
    <span style="color:#fbde2d">var</span> expires <span style="color:#fbde2d">=</span> <span style="color:#61ce3c">"expires="</span> <span style="color:#fbde2d">+</span> d.<span style="color:#8da6ce">toUTCString</span>();
    <span style="color:#8da6ce">document</span>.<span style="color:#8da6ce">cookie</span> <span style="color:#fbde2d">=</span> cname <span style="color:#fbde2d">+</span> <span style="color:#61ce3c">"="</span> <span style="color:#fbde2d">+</span> cvalue <span style="color:#fbde2d">+</span> <span style="color:#61ce3c">";"</span> <span style="color:#fbde2d">+</span> expires <span style="color:#fbde2d">+</span> <span style="color:#61ce3c">";path=/"</span>;
}
<span style="color:#fbde2d">function</span> <span style="color:#ff6400">getCookie</span>(cname) {
    <span style="color:#fbde2d">var</span> value <span style="color:#fbde2d">=</span> <span style="color:#8da6ce">document</span>.<span style="color:#8da6ce">cookie</span>.<span style="color:#8da6ce">match</span>(<span style="color:#fbde2d">new</span> <span style="color:#ff6400">RegExp</span>(cname <span style="color:#fbde2d">+</span> <span style="color:#61ce3c">'.*;?'</span>, <span style="color:#61ce3c">'gm'</span>));
    <span style="color:#fbde2d">if</span>(<span style="color:#fbde2d">!</span><span style="color:#fbde2d">!</span>value) {
        value <span style="color:#fbde2d">=</span> value[<span style="color:#61ce3c">'0'</span>].<span style="color:#8da6ce">replace</span>((cname <span style="color:#fbde2d">+</span> <span style="color:#61ce3c">'='</span>)|(<span style="color:#61ce3c">';'</span>), <span style="color:#61ce3c">''</span>);
    }
    <span style="color:#fbde2d">return</span> value;
}
<span style="color:#fbde2d">function</span> <span style="color:#ff6400">showCookie</span>() {
    <span style="color:#8da6ce">alert</span>(<span style="color:#8da6ce">document</span>.<span style="color:#8da6ce">cookie</span>);
}
<span style="color:#fbde2d">function</span> <span style="color:#ff6400">func1</span>() {
    setCookie(jQuery(<span style="color:#61ce3c">'#cname'</span>).val()
    , jQuery(<span style="color:#61ce3c">'#cvalue'</span>).val()
    , jQuery(<span style="color:#61ce3c">'#exdays'</span>).val());
}
<span style="color:#fbde2d">function</span> <span style="color:#ff6400">func2</span>() {
    setCookie(jQuery(<span style="color:#61ce3c">'#cname'</span>).val(), <span style="color:#61ce3c">''</span>, <span style="color:#fbde2d">-</span><span style="color:#d8fa3c">1</span>);
}
<span style="color:#fbde2d">function</span> <span style="color:#ff6400">func3</span>() {
    <span style="color:#8da6ce">alert</span>(getCookie(jQuery(<span style="color:#61ce3c">'#cname'</span>).val()));
}
</pre>

<?php
putFooter();
?>

