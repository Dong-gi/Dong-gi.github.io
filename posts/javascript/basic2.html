<hr>

<details>
    <summary>BOM; Browser Object Model</summary>
    <ul>
        <li>window</li>
        브라우저 윈도우를 가리키는 객체
        <button class="btn-code" path="Repositories/JavaScript/Browser/window_open.js" lan="javascript">Window#open</button>
        <button class="btn-code" path="Repositories/JavaScript/Browser/window_resizeto.js" lan="javascript">Window#resizeTo</button>
        <button class="btn-code" path="Repositories/JavaScript/Browser/window_popup.js" lan="javascript">Window#alert, confirm, prompt</button><br>
        window.onload : 문서를 전부 로드했을 때 실행되는 이벤트 리스너.

        <li>screen</li>
        window.screen과 동일. 표시되는 화면과 연관

        <li>location</li>
        window.location과 동일. 현재 페이지 URL과 연관
        <button class="btn-code" path="Repositories/JavaScript/Browser/location.js" lan="javascript">예시 코드</button>

        <li>history</li>
        window.history와 동일. 페이지 기록과 연관

        <li>navigator</li>
        window.navigator와 동일. 브라우저 자체와 연관

        <li>document</li>
        window.document와 동일. 표시되는 페이지 내용과 연관
    </ul>
</details>

<hr>

<details>
    <summary>DOM; Document Object Model</summary>
    Icons made by <a href="http://www.freepik.com" title="Freepik">Freepik</a> from <a href="http://www.flaticon.com" title="Flaticon">www.flaticon.com</a> is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a>
    <div id="basic2-div1">
        <button class="btn-code" path="Repositories/JavaScript/Browser/dom_example1.js" lan="javascript">DOM 예시 1</button>
        <button class="btn-code" path="Repositories/JavaScript/Browser/dom_example2.js" lan="javascript">DOM 예시 2</button>
        <button class="btn-code" path="posts/javascript/audio_example.html" lan="nohighlight">Audio 예시</button>
        <button class="btn-code" path="posts/javascript/audio_example.html" lan="html">Audio 예시 코드</button>
        <button class="btn-code" path="posts/javascript/form_example.html" lan="nohighlight">Form 예시</button>
        <button class="btn-code" path="posts/javascript/form_example.html" lan="html">Form 예시 코드</button>
        <button class="btn-code" path="posts/javascript/selector_example.html" lan="nohighlight">Query selector 예시</button>
        <button class="btn-code" path="posts/javascript/selector_example.html" lan="html">Query selector 예시 코드</button>
    </div>
</details>

<hr>

<details>
    <summary>브라우저 저장소</summary>
    <button class="btn-code" path="posts/javascript/storage_example.html" lan="nohighlight">저장소 예시</button>
    <button class="btn-code" path="posts/javascript/storage_example.html" lan="html">저장소 예시 코드</button>
</details>

<hr>

<details>
    <summary>웹 워커</summary>
    <ol>
        <li>메인 페이지와 별개의 스코프에서 백그라운드에서 실행되는 작업자</li>
        let worker = new Worker("filename.js");<br>
        worker.postMessage("start!"); // 작업 시작. JSON 구조로 직렬화 가능한 값은 모두 전달 가능<br>
        worker.terminate(); // 즉시 종료<br>
        worker.onmesage = ...<br>
        worker.onerror ...
    
        <li>웹 워커 내부에서 전역 객체는 worker 자체</li>
        페이지에서 보낸 메시지를 알기 위해서 onmesage 이벤트 핸들러를 등록한다.<br>
        self.onmessage = ...
    </ol>
</details>

<hr>

<details>
    <summary>웹 소켓</summary>
    <ol>
        <li>오래 지속되는 하나의 연결을 이용해 완전한 양방향 통신을 제공한다.</li>
        <li>프로토콜은 ws(비보안), wss(보안)</li>
        <li>웹 소켓은 동일 소스 정책이 적용되지 않으므로, 연결을 수락할지는 완전히 서버의 권한</li>
        <li>이벤트 종류 : open, message, error, close</li>
        let socket = new WebSocket("ws://host-address/page_or_function_name");<br>
        socket.send("Hello World");<br>
        socket.onmessage = function(event) { event.data ... }<br>
        socket.close(); // close 이벤트 객체는 wasClean, code, reason 프로퍼티 존재
    </ol>
</details>

<hr>

<details>
    <summary>함수 감속</summary>
    윈도우 resize, scroll 이벤트처럼 연속적으로 발생하지만 연속적으로 처리할 필요가 없는 경우, 타이머를 등록한 뒤 로직이 실행되도록 하고, 로직이 실행되기 전에 재호출되면 기존 타이머를 제거하고 타이머를 재등록하는 기법<br>
    function throttle(func, context) {<br>
    　　clearTimeout(func.tId);<br>
    　　func.tId = setTimeout(() => func.call(context), 100);<br>
    }
</details>

<hr>

<details>
    <summary>AJAX; Asynchronous JavaScript and XML + JSONP</summary>
    <ol>
        <li>핵심 기술은 XMLHttpRequest; XHR</li>

        <details>
            <summary>Ajax 이벤트</summary>
            <ul>
                <li>loadstart : 응답의 첫 번째 바이트를 수신</li>
                <li>progress : 응답 수신 중 계속 발생</li>
                <li>error : 요청에 에러가 있을 때</li>
                <li>abort : abort() 호출해 연결을 종료했을 때</li>
                <li>load : 응답을 완전히 받았을 때</li>
                <li>loadend : 통신 종료. error, abort, load보다 나중에 발생</li>
            </ul>
        </details>

        <li>XMLHttpRequest 예</li>
        let request = new XMLHttpRequest();<br>
        // XMLHttpRequest.open(method, url, async, user, password)<br>
        request.open('GET', './index.html', false);<br>
        request.send();<br>
        console.log(request.responseText);

        <li>FormData를 보낼 수 있다</li>
        let data = new FormData();<br>
        data.append("key", "value");<br>
        <br>
        let data = new FormData(document.forms[0]);<br>
        request.send(data);<br>
        // Blob, BufferSource, FormData, URLSearchParams, ReadableStream, USVString 전송 가능
    
        <li>jQuery Ajax 구문</li>
        Ajax 간편 표기 : $.get(), $.post(), $.getJSON(), $.getScript(), $(selector).load()<br>
        $.ajax({ type: 'get', url: './index.html', success: (data) => console.log(data) });<br>
        <details>
            <summary>예시 코드 2</summary>
            $.ajax({<br>
            　　type: 'post',<br>
            　　dataType: 'json',<br>
            　　url: 'http://donggi.dothome.co.kr/add_comment.php',<br>
            　　data: { path: path, comment: comment },<br>
            　　success: (data) => {<br>
            　　　　if (data === "OK") {<br>
            　　　　　　showSnackbar("등록 성공", $('body'));<br>
            　　　　　　$(posts.contents[id]).find('input.form-control').val('');<br>
            　　　　　　getComment(path);<br>
            　　　　} else {<br>
            　　　　　　showSnackbar("60초당 1번씩 등록 가능", $('body'));<br>
            　　　　}<br>
            　　},<br>
            　　error: (request, status, error) => {<br>
            　　　　showSnackbar("등록 실패.", $('body'));<br>
            　　}<br>
            });            
        </details>

        <li>jQuery Ajax 옵션</li>
        async, complete(xhr, status), data, error(xhr, status, error), jsonp, jsonpCallback, success(data, status, xhr), timeout, type, url

        <li>JSONP : JSON with Padding</li>
        크로스 도메인 제약이 적용되지 않는다. &lt;script src="~.js"&gt;&lt;/script&gt;, &lt;script src="~.json"&gt;&lt;/script&gt;도 JSONP 통신의 일종
    </ol>
</details>

<hr>

<details>
    <summary>파일 API</summary>
    <ol>
        <li>이전에는 자바스크립트에서 로컬 파일에 접근하는 것이 불가능했지만, 사용자가 입력 태그에 직접 설정한 파일에 대해 읽기가 가능해졌다.</li>
        로컬 파일 접근을 허용하는 브라우저에서 &lt;input type="file"&gt; 요소의 files 프로퍼티는 FileList 객체다.
        FileList는 길이 0 이상의 File 객체 목록이며, File 객체는 name과 lastModifiedDate 프로퍼티가 있는 Blob 객체다.

        <li>아래 입력 필드에 아무 파일이나(이왕이면 이미지로) 드롭해보세요</li>
        <input id="basic2-input-files1" type="file" multiple/>
        <button class="btn-code" path="Repositories/JavaScript/Browser/file_example.js" lan="javascript">예시 코드</button>

        <li>File, Blob 객체를 slice하면 Blob 객체가 반환된다</li>

        <li>BLOB; BInary Large Object</li>
        <ul>
            <li>postMessage()로 웹 워커에 blob을 보낼 수 있다</li>
            <li>XMLHttpRequest.send()로 blob을 보낼 수 있다</li>
            <li>URL.createObjectURL()로 blob:// 주소를 가져올 수 있으며, 이 url은 DOM이나 CSS를 활용할 수 있다</li>
            Blob URL 삭제 : URL.revokeObjectURL()
            <button class="btn-code" path="Repositories/JavaScript/Browser/blob_example.js" lan="javascript">예시 코드</button>
            <li>FileReader 객체를 사용하면 Blob 내용을 비동기적으로 문자열이나 ArrayBuffer로 추출할 수 있다</li>
        </ul>

        <li>FileReader</li>
        readAsText(file, encoding), readAsDataURL(file), readAsBinaryString(file), readAsArrayBuffer(file)
    </ol>
</details>

<hr>