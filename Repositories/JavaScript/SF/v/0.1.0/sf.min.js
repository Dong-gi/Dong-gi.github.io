String.prototype.hashCode||(String.prototype.hashCode=function(){let e,t,r=0;if(0===this.length)return r;for(e=0;e<this.length;e++)t=this.charCodeAt(e),r=(r<<5)-r+t,r|=0;return r}),String.prototype.asSF=function(){let e=document.createElement("template");switch(e.insertAdjacentHTML("afterbegin",this),e.childElementCount){case 0:return null;case 1:return SF.asSF(e.firstChild);default:return SF.asSFarr(e.children)}};class SF{static build(e){e||(e=document.querySelector("[sf]"));let t=this.asSF(e);return t.templates=SF.templates,t.newTemplate=function(e,t,r){let n=((e,t)=>new Proxy(SF.__placeholder,{apply:function(r,n,a){let s=e().asSF();return t(s),s}}))(t,r);return this.templates[e]=n,n},t.asTemplate=function(e,t,r){let n=document.getElementById(t);if(!n)throw new Error(`No such id element : ${t}`);return this.newTemplate(e,()=>n.outerHTML,r)},t}static asSF(e){return e?e.__key&&SF.map[e.__key]?SF.map[e.__key]:(e.__key=`${(new Date).getTime()}__${Math.random()}`.replace(".","").hashCode(),SF.map[e.__key]=new Proxy(e,{set(e,t,r){return e.hasAttribute(t)?e.setAttribute(t,r):(e.hasOwnProperty(t),e[t]=r)},get(e,t){switch(t){case"$":return e;case"after":case"before":case"firstChild":case"lastChild":case"firstElementChild":case"lastElementChild":case"parentElement":case"parentNode":return SF.asSF(e[t]);case"children":case"childNodes":return SF.asSFarr(e[t]);case"text":return SF.asSFarr(Array.from(e.childNodes).filter(e=>"#text"==e.nodeName))}return e.hasAttribute(t)?e.getAttribute(t):e.hasOwnProperty(t)?e[t]:void 0!=e[t]&&null!=e[t]?e[t]:e.hasAttribute("sf")&&document.getElementById(t)?SF.asSF(document.getElementById(t)):SF.asSFarr(e.querySelectorAll(t))}}),SF.map[e.__key]):e}static asSFarr(e){let t=[];if(!e)return t;for(let r of e)t.push(SF.asSF(r));return t}}SF.map=SF.map||new Map,SF.templates=SF.templates||new Map,SF.__placeholder=SF.__placeholder||function(){};