String.prototype.hashCode||(String.prototype.hashCode=function(){let e,t,r=0;if(0===this.length)return r;for(e=0;e<this.length;e++)t=this.charCodeAt(e),r=(r<<5)-r+t,r|=0;return r}),String.prototype.asSF=function(){let e=document.createElement("template");switch(e.insertAdjacentHTML("afterbegin",this),e.childElementCount){case 0:return null;case 1:return SF.asSF(e.firstChild);default:return SF.asSFarr(e.children)}};class SF{static build(e){e||(e=document.querySelector("[sf]")),e.__isRoot=!0;let t=this.asSF(e);return t.newTemplate=function(e,t){let r=(e=>new Proxy(SF.__placeholder,{apply:function(t,r,n){let a=e().asSF();return 1==n.length?n[0](a):n.length>1&&n[0](a,...n.slice(1)),a}}))(t);return SF.__templates[e]=r,r},t.asTemplate=function(e,t){return this.newTemplate(e,(e=>()=>e.outerHTML)(t))},t}static asSF(e){return e?e.__key&&SF.__map[e.__key]?SF.__map[e.__key]:(e.__key=`${(new Date).getTime()}__${Math.random()}`.replace(".","").hashCode(),SF.__map[e.__key]=new Proxy(e,{set(e,t,r){return e.hasAttribute(t)?e.setAttribute(t,r):(e.hasOwnProperty(t),e[t]=r)},get(e,t){switch(t){case"$":return e;case"after":case"before":case"firstChild":case"lastChild":case"firstElementChild":case"lastElementChild":case"parentElement":case"parentNode":return SF.asSF(e[t]);case"children":case"childNodes":return SF.asSFarr(e[t]);case"text":return SF.asSFarr(Array.from(e.childNodes).filter(e=>"#text"==e.nodeName))}if(t.startsWith("$"))return SF.asSFarr(e.querySelectorAll(t.substr(1)));if(e.hasAttribute(t))return e.getAttribute(t);if(e.hasOwnProperty(t))return e[t];if(void 0!=e[t]&&null!=e[t])return e[t];if(e.__isRoot&&document.getElementById(t))return SF.asSF(document.getElementById(t));let r=Array.from(e.childNodes).filter(e=>e.nodeName==t.toUpperCase());return r.length>0?SF.asSFarr(r):SF.asSFarr(e.querySelectorAll(t))}}),SF.__map[e.__key]):e}static asSFarr(e){let t=[];if(!e)return t;for(let r of e)t.push(SF.asSF(r));return 1==t.length?t[0]:t}}SF.__map=SF.__map||new Map,SF.__templates=SF.__templates||new Map,SF.__placeholder=SF.__placeholder||function(){};