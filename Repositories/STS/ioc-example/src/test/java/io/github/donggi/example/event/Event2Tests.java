package io.github.donggi.example.event;

import org.junit.jupiter.api.Test;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import lombok.extern.slf4j.Slf4j;

@Slf4j
@SpringBootTest
class Event2Tests {

    @Autowired
    private MyEvent2Publisher publisher;
    
    @Test
    void test() {
        log.info("1");
        publisher.publish("Hello World");
        log.info("2");
    }
/*
14:31:20.312 [main] INFO  i.g.d.e.event.MyEvent2Listener2 - Something(org.springframework.context.event.ContextRefreshedEvent[source=org.springframework.web.context.support.GenericWebApplicationContext@48e7b3d2, started on Fri Jun 19 14:31:16 KST 2020]) happened...
14:31:20.326 [main] INFO  i.g.d.e.event.MyEvent2Listener2 - Something(org.springframework.boot.context.event.ApplicationStartedEvent[source=org.springframework.boot.SpringApplication@776015fc]) happened...
14:31:20.327 [main] INFO  i.g.d.e.event.MyEvent2Listener2 - Something(org.springframework.boot.availability.AvailabilityChangeEvent[source=org.springframework.web.context.support.GenericWebApplicationContext@48e7b3d2, started on Fri Jun 19 14:31:16 KST 2020]) happened...
14:31:20.329 [main] INFO  i.g.d.e.event.MyEvent2Listener2 - Something(org.springframework.boot.context.event.ApplicationReadyEvent[source=org.springframework.boot.SpringApplication@776015fc]) happened...
14:31:20.329 [main] INFO  i.g.d.e.event.MyEvent2Listener2 - Something(org.springframework.boot.availability.AvailabilityChangeEvent[source=org.springframework.web.context.support.GenericWebApplicationContext@48e7b3d2, started on Fri Jun 19 14:31:16 KST 2020]) happened...
14:31:20.391 [main] INFO  i.g.d.e.event.MyEvent2Listener2 - Something(org.springframework.test.context.event.PrepareTestInstanceEvent[source=[DefaultTestContext@f2b90fc testClass = Event2Tests, testInstance = io.github.donggi.example.event.Event2Tests@2bb41f5c, testMethod = [null], testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@24c685e7 testClass = Event2Tests, locations = '{}', classes = '{class io.github.donggi.example.IocExampleApplication}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@60957c0f, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@1dd6d4b7, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@3cc41abc, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@20b12f8a, org.springframework.boot.test.context.SpringBootTestArgs@1], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]]) happened...
14:31:20.529 [main] INFO  i.g.d.e.event.MyEvent2Listener2 - Something(org.springframework.test.context.event.BeforeTestMethodEvent[source=[DefaultTestContext@f2b90fc testClass = Event2Tests, testInstance = io.github.donggi.example.event.Event2Tests@2bb41f5c, testMethod = test@Event2Tests, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@24c685e7 testClass = Event2Tests, locations = '{}', classes = '{class io.github.donggi.example.IocExampleApplication}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@60957c0f, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@1dd6d4b7, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@3cc41abc, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@20b12f8a, org.springframework.boot.test.context.SpringBootTestArgs@1], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]]) happened...
14:31:21.305 [main] INFO  i.g.d.e.event.MyEvent2Listener2 - Something(org.springframework.test.context.event.BeforeTestExecutionEvent[source=[DefaultTestContext@f2b90fc testClass = Event2Tests, testInstance = io.github.donggi.example.event.Event2Tests@2bb41f5c, testMethod = test@Event2Tests, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@24c685e7 testClass = Event2Tests, locations = '{}', classes = '{class io.github.donggi.example.IocExampleApplication}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@60957c0f, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@1dd6d4b7, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@3cc41abc, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@20b12f8a, org.springframework.boot.test.context.SpringBootTestArgs@1], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]]) happened...
14:31:21.316 [main] INFO  i.g.donggi.example.event.Event2Tests - 1
14:31:21.318 [main] INFO  i.g.d.e.event.MyEvent2Listener1 - Hello World
14:31:21.324 [main] INFO  i.g.d.e.event.MyEvent2Listener2 - Something(io.github.donggi.example.event.MyEvent2[source=io.github.donggi.example.event.MyEvent2Publisher@ee96866]) happened...
14:31:21.324 [main] INFO  i.g.donggi.example.event.Event2Tests - 2
14:31:21.327 [main] INFO  i.g.d.e.event.MyEvent2Listener2 - Something(org.springframework.test.context.event.AfterTestExecutionEvent[source=[DefaultTestContext@f2b90fc testClass = Event2Tests, testInstance = io.github.donggi.example.event.Event2Tests@2bb41f5c, testMethod = test@Event2Tests, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@24c685e7 testClass = Event2Tests, locations = '{}', classes = '{class io.github.donggi.example.IocExampleApplication}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@60957c0f, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@1dd6d4b7, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@3cc41abc, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@20b12f8a, org.springframework.boot.test.context.SpringBootTestArgs@1], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]]) happened...
14:31:21.338 [main] INFO  i.g.d.e.event.MyEvent2Listener2 - Something(org.springframework.test.context.event.AfterTestMethodEvent[source=[DefaultTestContext@f2b90fc testClass = Event2Tests, testInstance = io.github.donggi.example.event.Event2Tests@2bb41f5c, testMethod = test@Event2Tests, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@24c685e7 testClass = Event2Tests, locations = '{}', classes = '{class io.github.donggi.example.IocExampleApplication}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@60957c0f, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@1dd6d4b7, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@3cc41abc, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@20b12f8a, org.springframework.boot.test.context.SpringBootTestArgs@1], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -> true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -> true]]]) happened...
14:31:21.353 [main] INFO  i.g.d.e.event.MyEvent2Listener2 - Something(org.springframework.test.context.event.AfterTestClassEvent[source=[DefaultTestContext@f2b90fc testClass = Event2Tests, testInstance = [null], testMethod = [null], testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@24c685e7 testClass = Event2Tests, locations = '{}', classes = '{class io.github.donggi.example.IocExampleApplication}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@60957c0f, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@1dd6d4b7, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@3cc41abc, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@20b12f8a, org.springframework.boot.test.context.SpringBootTestArgs@1], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -> true, 'org.springframework.test.context.support.DependencyInjectionTestExecutionListener.reinjectDependencies' -> true]]]) happened...
14:31:21.414 [SpringContextShutdownHook] INFO  i.g.d.e.event.MyEvent2Listener2 - Something(org.springframework.context.event.ContextClosedEvent[source=org.springframework.web.context.support.GenericWebApplicationContext@48e7b3d2, started on Fri Jun 19 14:31:16 KST 2020]) happened...
14:31:21.419 [task-1] INFO  i.g.d.e.event.MyEvent2Listener2 - MyEvent2 happened...
*/
}
