const recentChangedPosts="\nM\tpugs/language/javascript/node.pug\nM\tpugs/infra/aws.pug\nM\tpugs/language/javascript/node.pug\nA\tpugs/book/084.pug\nA\tpugs/book/085.pug\nM\tpugs/infra/aws.pug\nM\tpugs/infra/aws.pug\nM\tpugs/infra/aws.pug\nA\tpugs/book/077.pug\nA\tpugs/book/078.pug\nA\tpugs/book/079.pug\nA\tpugs/book/080.pug\nA\tpugs/book/081.pug\nA\tpugs/book/082.pug\nA\tpugs/book/083.pug\nM\tpugs/infra/aws.pug\nM\tpugs/infra/aws.pug\nM\tpugs/infra/aws.pug\nM\tpugs/infra/aws.pug\nM\tpugs/infra/aws.pug\nM\tpugs/infra/aws.pug\nM\tpugs/infra/web/network.pug\nM\tpugs/infra/aws.pug\nM\tpugs/infra/aws.pug\nM\tpugs/infra/aws.pug\nM\tpugs/infra/aws.pug\nM\tpugs/infra/aws.pug\nM\tpugs/algorithm/overview.pug\nA\tpugs/book/071.pug\nA\tpugs/book/072.pug\nA\tpugs/book/073.pug\nA\tpugs/book/074.pug\nA\tpugs/book/075.pug\nA\tpugs/book/076.pug\nM\tpugs/book/etc.pug\nM\tpugs/daily_life/house.pug\n";String.prototype.hashCode||(String.prototype.hashCode=function(){let e,t,o=0;if(0===this.length)return o;for(e=0;e<this.length;e++)t=this.charCodeAt(e),o=(o<<5)-o+t,o|=0;return o}),String.prototype.asSF=function(){let e=document.createElement("template");e.insertAdjacentHTML("afterbegin",this);for(let t of e.querySelectorAll("script")){let e=document.createElement("script");t.src.length>0&&(e.src=t.src),t.text.length>0&&(e.text=t.text),t.after(e),t.remove()}switch(e.childElementCount){case 0:return null;case 1:return SF.asSF(e.firstChild);default:return SF.asSFarr(e.children)}},String.prototype.compareString=function(e){return SFUtil.compareString(this,e)},File.prototype.toJSON||(File.prototype.toJSON=function(){return JSON.stringify({name:this.name,size:this.size,type:this.type,lastModified:this.lastModified})});class SFKey{}SFKey.map=Symbol("SFNode map"),SFKey.key=Symbol("SFNode's key"),SFKey.templates=Symbol("SF template map"),SFKey.placeholder=Symbol("Placeholder function. Do nothing"),SFKey.isRoot=Symbol("If true, this.$ == root element"),SFKey.beforeSetHooks=Symbol("Before set hook list"),SFKey.afterSetHooks=Symbol("After set hook list"),SFKey.beforeDelHooks=Symbol("Before delete hook list"),SFKey.afterDelHooks=Symbol("After delete hook list"),SFKey.numPartRegex1=/(((^|[\s$¥£₡₱€₩₭฿])[+-]?)?(\d+(,\d+)*(\.\d+)?)|(\d?\.\d+)|(\d+))/,SFKey.numPartRegex2=/(([\s$¥£₡₱€₩₭฿][+-]?)?(\d+(,\d+)*(\.\d+)?)|(\d?\.\d+)|(\d+))/,SFKey.startWithNumberRegex1=new RegExp(`^${SFKey.numPartRegex1.source}`),SFKey.startWithNumberRegex2=new RegExp(`^${SFKey.numPartRegex2.source}`),SFKey.textPartRegex1=new RegExp(`^((?!${SFKey.numPartRegex1.source})[\\d\\D])+`,"m"),SFKey.textPartRegex2=new RegExp(`^((?!${SFKey.numPartRegex2.source})[\\d\\D])+`,"m"),Object.freeze(SFKey);class SF{static build(e){e||(e=document.querySelector("[sf]")),e[SFKey.isRoot]=!0;let t=this.asSF(e);return t.newTemplate=function(e,t){let o=new Proxy(SF[SFKey.placeholder],{apply:function(e,o,r){let n=t().asSF();return 1==r.length?r[0](n):r.length>1&&r[0](n,...r.slice(1)),n}});return SF[SFKey.templates][e]=o,o},t.asTemplate=function(e,t){return this.newTemplate(e,(()=>t.outerHTML))},t}static asSF(e){if(!e)return e;if(e[SFKey.key]&&SF[SFKey.map][e[SFKey.key]])return SF[SFKey.map][e[SFKey.key]];e[SFKey.key]=`${(new Date).getTime()}__${Math.random()}`.replace(".","").hashCode();let t=new Proxy(e,{set(t,o,r){if("string"!=typeof o)return(t[o]=r)||!0;for(let n of SF[SFKey.map][e[SFKey.key]][SFKey.beforeSetHooks])n.prop&&n.prop!=o||n.callback(t,o,r);t.hasAttribute&&t.hasAttribute(o)?t.setAttribute(o,r):t[o]=r;for(let n of SF[SFKey.map][e[SFKey.key]][SFKey.afterSetHooks])n.prop&&n.prop!=o||n.callback(t,o,r);return!0},get(e,t){if("string"!=typeof t)return e[t];switch(t){case"$":return e;case"after":case"before":case"firstChild":case"lastChild":case"firstElementChild":case"lastElementChild":case"parentElement":case"parentNode":return SF.asSF(e[t]);case"children":case"childNodes":return SF.asSFarr(e[t]);case"#text":return SF.asSFarr(Array.from(e.childNodes).filter((e=>"#text"==e.nodeName)))}if(t.startsWith("$"))return SF.asSFarr(e.querySelectorAll(t.substr(1)));if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e.hasOwnProperty(t))return e[t];if(null!=e[t]&&null!=e[t])return e[t];if(e[SFKey.isRoot]&&document.getElementById(t))return SF.asSF(document.getElementById(t));if(e.childNodes){let o=Array.from(e.childNodes).filter((e=>e.nodeName==t.toUpperCase()));if(o.length>0)return SF.asSFarr(o)}return e.querySelectorAll&&SF.asSFarr(e.querySelectorAll(t))},deleteProperty(t,o){if(!(o in t))return!1;if("string"==typeof o)for(let r of SF[SFKey.map][e[SFKey.key]][SFKey.beforeDelHooks])r.prop&&r.prop!=o||r.callback(t,o,t[o]);if(delete t[o],"string"==typeof o)for(let r of SF[SFKey.map][e[SFKey.key]][SFKey.afterDelHooks])r.prop&&r.prop!=o||r.callback(t,o,t[o]);return!0}});return SF[SFKey.map][e[SFKey.key]]=t,t[SFKey.beforeSetHooks]=[],t[SFKey.afterSetHooks]=[],t[SFKey.beforeDelHooks]=[],t[SFKey.afterDelHooks]=[],t}static asSFarr(e){let t=[];if(!e)return t;for(let o of e)t.push(SF.asSF(o));return 1==t.length?t[0]:t}static bindOneWay(e,t,o){SF.beforePropertySet(e,o,((e,o,r)=>{SF.asSF(t)[o]=r}))}static bindTwoWay(e,t,o){SF.bindOneWay(e,t,o),SF.bindOneWay(t,e,o)}static beforePropertySet(e,t,o){SF.asSF(e)[SFKey.beforeSetHooks].push(new HookAction(t,((e,t,r)=>{e[t]!=r&&o(e,t,r)})))}static afterPropertySet(e,t,o){SF.asSF(e)[SFKey.afterSetHooks].push(new HookAction(t,((e,t,r)=>{o(e,t,r)})))}static beforePropertyDel(e,t,o){SF.asSF(e)[SFKey.beforeDelHooks].push(new HookAction(t,((e,t,r)=>{o(e,t,r)})))}static afterPropertyDel(e,t,o){SF.asSF(e)[SFKey.afterDelHooks].push(new HookAction(t,((e,t)=>{o(e,t)})))}static bindForm(e){e=e.$||e;let t=SF.asSF(SF.formToObject(e));SF.afterPropertySet(t,null,(e=>function(t,o,r){SF.jsonToForm(e,t,o)})(e)),SF.afterPropertyDel(t,null,(e=>function(t,o,r){SF.jsonToForm(e,t,o)})(e));for(let o of e.querySelectorAll("input,select,textarea")){let r=SFUtil.debounce(SF.observeForm(e,(e=>function(t,o,r){e[t]=o})(t)),100);o.addEventListener("change",r),o.addEventListener("keyup",r)}return t}static observeForm(e,t){return(e=>function(o){let r=o.target;for(;r!=e&&!r.name;)r="LABEL"==r.tagName&&r.getAttribute("for")?document.getElementById(r.getAttribute("for")):r.parentElement;r!=e&&t(r.name,SF.formToObject(e,r.name)[r.name],r)})(e)}static formToObject(e,t){function o(o,r){if("SELECT"==o.tagName){let e=o.querySelectorAll("option:not([disabled]):checked");if(!e)return r;if(1==e.length)r[o.name]=e[0].value;else{r[o.name]=[];for(let t of e)r[o.name].push(t.value)}}else if(o.type&&"file"==o.type.toLowerCase())r[o.name]=Array.from(o.files);else if(o.type&&"radio"==o.type.toLowerCase())if(t){let n=e.querySelector(`input[name="${t}"][type=radio]:not([disabled]):checked`);r[o.name]=!n||n.value}else r[o.name]=o.checked;else o.type&&"checkbox"==o.type.toLowerCase()?r[o.name]=o.checked:r[o.name]=o.value;return r}let r={};if(t)o(e.querySelector(`[name="${t}"]`),r);else{let t="input[name]:not([disabled]):not([type=radio]):not([type=checkbox])",n="input[name][type=radio]:not([disabled]):checked",l="input[name][type=checkbox]:not([disabled]):checked",a="textarea[name]:not([disabled])",i="select[name]:not([disabled])";for(let s of e.querySelectorAll(`${t},${n},${l},${a},${i}`))o(s,r)}return r}static jsonToForm(e,t,o){function r(e,o,r){let n=e.querySelector(`[name="${r}"]`);if(n){switch(n.tagName){case"INPUT":switch((n.type||"").toLowerCase()){case"file":return;case"radio":return n=e.querySelector(`[name="${r}"][value="${t[r]}"]`),n&&(n.checked=Boolean(t[r]));case"checkbox":return n.checked=Boolean(t[r]);default:return n.value=t[r]||""}case"TEXTAREA":return n.value=t[r]||"";case"SELECT":for(let e of n.querySelectorAll("option:not([disabled])"))e.selected=!1;if(Array.isArray(o[r]))for(let e of o[r])n.querySelector(`option[value="${e}"]`).selected=!0;else o[r]&&(n.querySelector(`option[value="${o[r]}"]`).selected=Boolean(o[r]));return}console.log("??? target, form, obj, name ↓\n",n,e,o,r)}}if("string"==typeof t&&(t=JSON.parse(t)),o)return r(e,t,o);for(let o in t)r(e,t,o)}static asDataGrid(e,t){if("string"==typeof e&&e.startsWith("{")&&e.endsWith("}"))return SF.asDataGrid(JSON.parse(e));let o;return o=Array.isArray(e)?DataGrid.fromArray(e,t):"string"==typeof e?DataGrid.fromCSV(e,t):DataGrid.fromObject(e,t),o}static throttle(e,t,o){SFUtil.throttle(e,t,o)}static debounce(e,t,o){SFUtil.debounce(e,t,o)}}SF[SFKey.map]=new Map,SF[SFKey.templates]=new Map,SF[SFKey.placeholder]=function(){},Object.freeze(SF);class HookAction{constructor(e,t){var o;this.active=new Set,this.counter=0,this.prop=e,this.callback=(o=t,function(){if(0==this.active.size){let e;this.active.add(e=this.counter++),o(...arguments),this.active.delete(e)}})}}class DataGrid{constructor(e,t,o){this.data=e,this.opt=t||{},this.cols=new ColGroup;for(let e=0;e<o.length;++e)this.cols.add(new Column(o[e],e,e))}static fromCSV(e,t){if(!(t=t||{}).delimiter){let o=e.split("\n",1)[0];t.delimiter=o.replace(/,/g,"").length<o.replace(/\t/g,"").length?",":"\\t"}t.quote=t.quote||'"',t.escape=t.escape||"\\\\";const o=new RegExp(`^([^\n${t.delimiter}${t.quote}]*)${t.delimiter}`),r=new RegExp(`^([^${t.delimiter}${t.quote}]*)\n`),n=new RegExp(`^${t.quote}(.*?)${t.quote}(${t.delimiter}|\n)?`,"mi"),l=new RegExp(`^${t.quote}([\\s\\S\n]*?)${t.quote}(${t.delimiter}|\n)?`,"mi");e=e.replace(/\r\n/gm,"\n");let a="🚮";for(;e.search(a)>=0;)a=String.fromCodePoint(a.codePointAt(0)+1);e=e.replace(new RegExp(t.escape+t.quote,"gm"),a);let i=[],s=[];if(t.noHead){let t=c();for(let e=0;e<t.length;++e)i.push(e);for(s.push(u(t));e.length>0;)s.push(u(c()))}else i=c(),function(){let t,n=[];for(;e.length>0;)(t=o.exec(e))?(n.push(t[1]),e=e.replace(o,"")):(t=r.exec(e))?(n.push(t[1]),e=e.replace(r,"")):(t=l.exec(e))?(n.push(t[1]),e=e.replace(l,"")):(n.push(e),e=""),n.length==i.length&&(s.push(u(d(n))),n=[])}();return new DataGrid(s,t,i);function c(){let t,l="";e.search("\n")>=0?(l=e.split("\n",1)[0],e=e.slice(l.length+1)):(l=e,e="");let a=[];for(;l.length>0;)(t=o.exec(l))?(a.push(t[1]),l=l.replace(o,"")):(t=r.exec(l))?(a.push(t[1]),l=l.replace(r,"")):(t=n.exec(l))?(a.push(t[1]),l=l.replace(n,"")):(a.push(l),l="");return d(a)}function d(e){for(let o=0;o<e.length;++o)e[o]=e[o].replace(new RegExp(a,"gm"),t.quote);return e}function u(e){let t={};for(let o=0;o<i.length;++o)t[i[o]]=e[o]||"";return t}}static fromArray(e,t){let o=(t=t||{}).names;if(!o&&t.hasHead){if(o=[],Array.isArray(e[0]))o=e[0];else for(let t in e[0])o.push(`${t}`);e=e.slice(1)}let r=[];if(Array.isArray(e[0])){o||(o=[]);for(let t of e)r.push(n(t))}else{let t=new Set;for(let o of e){for(let e in o)t.add(`${e}`);r.push(o)}o||(o=Array.from(t))}return new DataGrid(r,t,o);function n(e){let t={};for(let r=0;r<e.length;++r)o.length<=r&&o.push(r),t[o[r]]=e[r]||"";return t}}static fromObject(e,t){let o=[];for(let t in e)o.push(e[t]);return DataGrid.fromArray(o)}getHeight(){return this.data.length}getWidth(){return this.cols.size()}getRows(e,t,o){e=e||0,t=t||this.getHeight();let r=[];for(let n=e;n<t;++n)o&&!o(this.data[n])||r.push(this.data[n]);return new DataGrid(r,this.opt,this.cols.columns().map((e=>e.name)))}getColumns(e,t,o){e=e||0,t=t||this.getWidth();let r=this.cols.columnsByDisplayOrder(),n=[];for(let l=e;l<t;++l)o&&!o(r[l])||n.push(r[l]);let l=[];for(let e of this.data){let t={};for(let o of n)t[o.name]=e[o.name];l.push(t)}return new DataGrid(l,this.opt,n.map((e=>e.name)))}getTableForm(){let e="<form><table></table></form>".asSF(),t=document.createElement("tr");for(let e of this.cols.columnsByDisplayOrder())t.append(`<th>${e.name}</th>`.asSF().$);e.table.$.append(t);for(let o=0;o<this.data.length;++o){t=document.createElement("tr");for(let e of this.cols.columnsByDisplayOrder())t.append(`<td><textarea class="sf-datagrid-cell" name="C${o}-${e.name}">${this.data[o][e.name]||""}</textarea></td>`.asSF().$);e.table.$.append(t)}for(let t of e.$.querySelectorAll("textarea")){let o=SFUtil.debounce(SF.observeForm(e.$,((e,t,o)=>{let[r,n]=e.match(/C(\d+)-(.+)/).slice(1);this.data[r][n]=t,o.style.height=o.scrollHeight+2})),100);t.addEventListener("change",o),t.addEventListener("keyup",o)}return e.$}}class Column{constructor(e,t,o){this.name=e,this.realIdx=t,this.dispIdx=o}}class ColGroup{constructor(e){this.cols=new Set(e||[])}columns(){return Array.from(this.cols)}columnsByDisplayOrder(){return this.columns().sort(((e,t)=>e.dispIdx-t.dispIdx))}size(){return this.cols.size}add(e){this.cols.add(e)}remove(e){this.cols.delete(e)}removeBy(e){for(let t of this.columns())e(t)&&this.remove(t)}removeByName(e){this.removeBy((function(e){e.name}))}removeByRealIdx(e){this.removeBy((function(e){e.realIdx}))}removeByDisplayIdx(e){this.removeBy((function(e){e.dispIdx}))}swapDisplayOrder(e,t){for(let o of this.columns())o.dispIdx==e?o.dispIdx=t:o.dispIdx==t&&(o.dispIdx=e)}}class SFUtil{static compareString(e,t){if(e==t)return 0;let[o,r]=[e,t];for(;;){if(e.length*t.length==0)return e.length-t.length;let n=(e===o?SFKey.startWithNumberRegex1:SFKey.startWithNumberRegex2).test(e),l=(t===r?SFKey.startWithNumberRegex1:SFKey.startWithNumberRegex2).test(t);if(n&&l){let n=parseFloat(e.match(e===o?SFKey.startWithNumberRegex1:SFKey.startWithNumberRegex2)[0].replace(/[^\-\d\.]/g,"")),l=parseFloat(t.match(t===r?SFKey.startWithNumberRegex1:SFKey.startWithNumberRegex2)[0].replace(/[^\-\d\.]/g,""));if(Math.abs(n-l)>=Number.EPSILON)return n-l;e=e.replace(e===o?SFKey.startWithNumberRegex1:SFKey.startWithNumberRegex2,""),t=t.replace(t===r?SFKey.startWithNumberRegex1:SFKey.startWithNumberRegex2,"");continue}if(n)return-1;if(l)return 1;let a=e.match(e===o?SFKey.textPartRegex1:SFKey.textPartRegex2)[0],i=t.match(t===r?SFKey.textPartRegex1:SFKey.textPartRegex2)[0],s=a.localeCompare(i);if(0!==s)return s;e=e.replace(e===o?SFKey.textPartRegex1:SFKey.textPartRegex2,""),t=t.replace(t===r?SFKey.textPartRegex1:SFKey.textPartRegex2,"")}}static debounce(e,t,o){return o=o||{lastCall:Date.now()},function(r){let n=o.lastCall;o.lastCall=Date.now(),n&&o.lastCall-n<=t&&(o&&o.fast||clearTimeout(o.lastCallTimer)),o.lastCallTimer=setTimeout((()=>e(r)),t)}}static makeLSlikeText(e,t,o){let r=[e],n="";for(;r.length>0;){let e=r.pop(),l=t;for(let t of e.split("/"))l.hasOwnProperty(t)&&(l=l[t]);n=`${n}${e}:\n`;for(let t in l)if(l.hasOwnProperty(t))if(t!=o)r.push(`${e}/${t}`),n=`${n}${t}\n`;else for(let e of l[t])n+=`${e}\n`}return n}static throttle(e,t,o){return o=o||{lastCall:Date.now()},function(r){let n=o.lastCall,l=Date.now();(!n||o&&o.fast||l-n>t)&&(e(r),o.lastCall=l)}}static getOffsetLeft(e){let t=(e=e.$||e).offsetLeft;for(;e.offsetParent;)t+=e.offsetParent.offsetLeft,e=e.offsetParent;return t}static getOffsetTop(e){let t=(e=e.$||e).offsetTop;for(;e.offsetParent;)t+=e.offsetParent.offsetTop,e=e.offsetParent;return t}static getRgba(e){let t=window.getComputedStyle(e.$||e).getPropertyValue("background-color"),o=/(\d+)\D*(\d+)\D*(\d+)\D*(\d*\.?\d*)/.exec(t);return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3]),/rgba/.test(t)?parseFloat(o[3]):1]}static highlight(e){var t;document.getElementById("sf-highlight-css")||document.getElementsByTagName("head")[0].append('<style id="sf-highlight-css">@keyframes sf-highlight{from{background:#ff0;box-shadow:0 0 0.5em 0.5em #ff0;padding:0.25em}to{background:#fff;box-shadow:0 0 #fff;padding:0}}</style>'.asSF().$),(e=e.$||e).style.animation="",setTimeout((t=e,function(){t.style.animation="sf-highlight 2s 1"}),139)}static showSnackbar(e,t,o){document.getElementById("sf-snackbar-css")||document.getElementsByTagName("head")[0].append('<style id="sf-snackbar-css">#sf-snackbar{visibility:hidden;min-width:250px;margin-left:-125px;background-color:#333;color:#fff;text-align:center;border-radius:2px;padding:16px;position:fixed;z-index:1000000;left:50%;bottom:30px;font-size:17px}\n#sf-snackbar.show{visibility:visible;-webkit-animation:sf-fadein 0.5s,sf-fadeout 0.5s 2.5s;animation:sf-fadein 0.5s,sf-fadeout 0.5s 2.5s}\n@-webkit-keyframes sf-fadein{from{bottom:0;opacity:0}to{bottom:30px;opacity:1}}\n@keyframes sf-fadein{from{bottom:0;opacity:0}to{bottom:30px;opacity:1}}\n@-webkit-keyframes sf-fadeout{from{bottom:30px;opacity:1}to{bottom:0;opacity:0}}\n@keyframes sf-fadeout{from{bottom:30px;opacity:1}to{bottom:0;opacity:0}}</style>'.asSF().$),t&&(t=t.$||t);let r=`<div id="sf-snackbar" class="show">${e}</div>`.asSF().$;(t||document.body).append(r),setTimeout((()=>document.getElementById("sf-snackbar").remove()),o||1e3)}static addHoverContent(e,t,o){e=e.$||e,(t=t.$||t).style.position="absolute",t.style.display="none",o=o||(e=>{let t=SFUtil.getRgba(e);e.style.backgroundColor=`rgba(${t[0]}, ${t[1]}, ${t[2]}, ${t[3]>.9?t[3]:t[3]+.1})`}),o(e);let r=((e,t)=>function(e){"block"!=t.style.display&&(t.style.display="block",t.style.top=e.pageY+"px",t.style.left=e.pageX+"px",t.style.maxWidth=window.innerWidth-e.clientX+"px",t.style.maxHeight=window.innerHeight-e.clientY+"px",t.style.overflow="auto")})(0,t),n=((e,t)=>function(o){if("none"==t.style.display)return;let r=SFUtil.getOffsetLeft(e),n=SFUtil.getOffsetTop(e);r<o.pageX&&o.pageX<r+e.offsetWidth&&n<o.pageY&&o.pageY<n+e.offsetHeight||(r=SFUtil.getOffsetLeft(t),n=SFUtil.getOffsetTop(t),r<o.pageX&&o.pageX<r+t.offsetWidth&&n<o.pageY&&o.pageY<n+t.offsetHeight||(t.style.display="none"))})(e,t);e.addEventListener("mouseenter",r),e.addEventListener("mouseleave",SFUtil.debounce(n,300)),t.addEventListener("mouseleave",SFUtil.debounce(n,300))}static addInputSelection(e,t,o){e=e.$||e;let r=`<div>${(o=o||(()=>'<ul style="margin:0;padding:0.5rem 1rem 0.5rem 2rem;background-color:white;z-index:10000"></ul>'))()}</div>`.asSF(),n=r.ul.$;r=r.$,r.style.display="none",r.style.position="absolute",r.style.borderWidth="2px",r.style.borderStyle="inset",r.classList.add("sf-input-selection"),document.body.append(r);for(let o of t){let t=`<li>${o}</li>`.asSF().$;t.onclick=((e,t)=>function(o){t.style.display="none",e.hasAttribute("value")?e.value=this.innerText:e.innerText=this.innerText;let r=document.createEvent("HTMLEvents");r.initEvent("input",!0,!0),e.dispatchEvent(r)})(e,r),n.append(t)}e.onmousedown=(e=>function(t){document.querySelectorAll(".sf-input-selection").forEach(((e,t,o)=>e.style.display="none")),e.style.display="block",e.style.top=t.pageY+"px",e.style.left=t.pageX+"px",e.style.maxWidth=window.innerWidth-t.clientX,e.style.maxHeight=window.innerHeight-t.clientY,e.style.overflow="auto"})(r)}static addOrderedTableFunctionality(){function e(e,t){for(let t of e){if("childList"!==t.type)return;for(let e of t.target.querySelectorAll("table")){if(e.classList.add("w3-table-all","w3-card","w3-small"),e.rows.length<3){e.classList.remove("ordered-table");continue}if(e.classList.contains("ordered-table"))continue;if(e.classList.add("ordered-table"),e.classList.contains("no-sort"))continue;let t=e.rows[0];t.classList.add("table-head-row");let o=new Set;for(let t of Array.from(e.rows).slice(1))t.querySelectorAll("td, th").forEach(((e,t,r)=>{if(o.has(t))return;e.textContent.replace(/null/gim,"").replace(/[\n\s]+/gm,"").trim().length>0&&o.add(t)}));for(let t of e.rows)t.querySelectorAll("td, th").forEach(((e,t,r)=>{o.has(t)||e.remove()}));t.querySelectorAll("td, th").forEach(((t,o,r)=>t.onclick=SFUtil.tableSorter(o,t,e)));let r=Array.from(t.querySelectorAll("td[pre-sort], th[pre-sort]"));r.sort(((e,t)=>parseFloat(e.getAttribute("pre-sort"))-parseFloat(t.getAttribute("pre-sort"))));for(let e of r)e.click()}}}document.querySelector("style#sf-ordered-table-css")||(document.getElementsByTagName("head")[0].append('<style id="sf-ordered-table-css">\ntd.sorting-table-head-black:after,th.sorting-table-head-black:after{content:attr(sort-order);color:black}\ntd.sorting-table-head-white:after,th.sorting-table-head-white:after{content:attr(sort-order);color:white;}</style>'.asSF().$),new MutationObserver(e).observe(document.body,{attributes:!1,childList:!0,subtree:!0}),e([{type:"childList",target:document.body}]))}static copyElementToClipboard(e){const t={TEXTAREA:!0};let o=e.$||e;for(;t[o.tagName];)o=o.parent();SFUtil.copyTextToCilpboard(e.value||e.textContent,o)}static copyTextToCilpboard(e,t){t&&(t=t.$||t);let o=`<textarea>${e.trim()}</textarea>`.asSF().$;(t||document.body).append(o),o.select(),document.execCommand("copy"),o.remove()}static downloadText(e,t){let o=document.createElement("a");o.href=URL.createObjectURL(new Blob([e],{type:"text/plain;charset=utf-8;"})),o.target="_blank",o.download=t,document.body.append(o),o.click(),o.remove()}static isElementInViewport(e){let t=(e=e.$||e).getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}static openLink(e,t){let o=document.createElement("a");o.href=e,o.target=t,document.body.append(o),o.click(),o.remove()}static printElement(e){e=e.$||e;const t=window.scrollY,o=document.getElementsByTagName("html")[0];let r=`<print>${e.innerHTML}</print>`.asSF().$;o.append(r),document.body.style.display="none",window.print(),document.body.style.display="block",r.remove(),window.scrollTo(0,t)}static tableSorter(e,t,o){if(t.classList.contains("no-sort"))return null;let r=SFUtil.getRgba(t);return r[0]+r[1]+r[2]<255*r[3]?t.classList.add("sorting-table-head-white"):t.classList.add("sorting-table-head-black"),t.getAttribute("sort-order")||t.setAttribute("sort-order","●"),()=>{let r=!("▲"==t.getAttribute("sort-order"));t.setAttribute("sort-order",r?"▲":"▼");let n=Array.from(o.rows).slice(1);n.sort(((t,o)=>{let n=SFUtil.compareString(t.querySelectorAll("td, th")[e].textContent.trim(),o.querySelectorAll("td, th")[e].textContent.trim());return r?n:-n}));for(let e of n)o.append(e)}}static toggleClass(e,t){e=e.$||e;for(let o of t)e.classList.contains(o)?e.classList.remove(o):e.classList.add(o)}}Object.freeze(SFUtil);const posts={};function goto(e){SFUtil.highlight(e);let t={top:SFUtil.getOffsetTop(e)-document.getElementById("nav").clientHeight};setTimeout((()=>window.scrollTo(t)),100)}function mutationCallback(e,t){for(let t of e){if("childList"!==t.type)return;addImageOnclick(t.target.querySelectorAll("img")),addCodeBtnOnclick(t.target.querySelectorAll("button.btn-code")),addHoverContents(t.target.querySelectorAll(".hover-content")),convertAsCodeDiv(t.target.querySelectorAll("div.as-code")),convertAsCodeSpan(t.target.querySelectorAll("span.as-code"))}}function addImageOnclick(e){for(let t of e)t.onclick||(t.onclick=(e=>function(t){SFUtil.openLink(e,"_blank")})(t.src))}function addCodeBtnOnclick(e){for(let t of e){let e=`${(new Date).getTime()}-${Math.random().toString().replace(/\./g,"")}`;t.id=`code-button-${e}`,t.classList.remove("btn-code"),t.onclick=insertCodeDiv(e)}}function addHoverContents(e){for(let t of e)SFUtil.addHoverContent(t,document.getElementById(t.getAttribute("template-id")))}function convertAsCodeDiv(e){for(let t of e){let e=t.innerHTML.trim().replace(/&lt;/gm,"<").replace(/&gt;/gm,">").replace(/&amp;/gm,"&");t.innerHTML="",fillCodeDiv(t,t.getAttribute("lan"),e),t.style.maxHeight=window.innerHeight/3+"px",t.classList.remove("as-code")}}function convertAsCodeSpan(e){for(let t of e){let e=t.innerHTML.trim().replace(/&lt;/gm,"<").replace(/&gt;/gm,">").replace(/&amp;/gm,"&");t.innerHTML=hljs.highlight(t.getAttribute("lan")||"text",e).value,t.classList.remove("as-code")}}function isNarrow(){return document.getElementById("nav").clientWidth<=1234}function updateSidebar(){isNarrow()?closeSidebar():openSidebar(),document.getElementById("sidebar").style.width="333px"}function openSidebar(){document.getElementById("main").style.marginLeft="333px",document.getElementById("sidebar").style.display="block"}function closeSidebar(){document.getElementById("main").style.marginLeft="0",document.getElementById("sidebar").style.display="none"}function toggleSidebar(){"none"==document.getElementById("sidebar").style.display?openSidebar():closeSidebar()}function updatePostList(){let e={posts:[]};for(let t of posts.list){let o=e;for(let e of t.category.split("/"))o.hasOwnProperty(e)||(o[e]={},o[e].posts=[]),o=o[e];o.posts.push(t.title)}let t=URL.createObjectURL(new Blob([SFUtil.makeLSlikeText("Category",e,"posts")],{type:"text/plain;charset=utf-8;"}));new DKFileList(t,"#post-list",null,!0,((e,t)=>`<li><a href="${posts.list.filter((e=>e.title==t))[0].file}">${t}</a></li>`.asSF().$),!0,(()=>{document.querySelectorAll("#post-list details").forEach((e=>e.open=!1));let e=document.getElementById("post-list"),t=document.querySelectorAll(`#post-list a[href="${location.pathname}"]`);if(t.length)for(let o of t){let t=o.parentElement;for(t.classList.add("w3-yellow");e!=t;)"DETAILS"==t.tagName&&(t.open=!0),t=t.parentElement}else document.querySelector("#post-list details").open=!0}))}function updateMarkerList(){for(let e of document.querySelectorAll("h1,h2,h3,h4,h5,h6"))e.classList.add("marker");let e={markers:[]},t=(new Date).getTime();for(let o of document.querySelectorAll(".marker"))o.setAttribute("marker-id","marker-"+t++),e.markers.push(o.getAttribute("marker-id"));let o=URL.createObjectURL(new Blob([SFUtil.makeLSlikeText("Content",e,"markers")],{type:"text/plain;charset=utf-8;"}));new DKFileList(o,"#marker-list",((e,t)=>{let o=document.querySelector(`.marker[marker-id=${t}]`),r=o;for(;"BODY"!=r.tagName;)"DETAILS"==r.tagName&&(r.open=!0),r=r.parentElement;goto(o)}),!0,((e,t)=>{let o=document.querySelector(`.marker[marker-id=${t}]`),r=getMarkerName(o),n=`<li class="${o.classList.contains("fake")?"w3-hide":""}" title="${r}" marker-id="${t}"></li>`.asSF().$;n.textContent=r.substr(0,50);let l=document.querySelector("div#contents"),a=0;const i=new Set(["THEAD","TBODY","TR","SPAN"]);for(;o.parentElement!=l;)o=o.parentElement,i.has(o.tagName)||(a+=1);return n.classList.add(`margin-left-${a}`),n.setAttribute("level",a),n}),!1,(()=>{let e=[0,0,0,0,0,0,0,0];const t=new Set(["H1","H2","H3","H4","H5","H6"]);for(let o of document.getElementById("marker-list").querySelectorAll("li")){let r=parseInt(o.getAttribute("level"));e[r]++,e.fill(0,r+1);let n=`${e.filter((e=>e>0)).join(".")}. `;o.innerText=`${n}${o.innerText}`;let l=document.querySelector(`.marker[marker-id=${o.getAttribute("marker-id")}]`);t.has(l.tagName)&&(l.innerHTML=`${n}${l.innerHTML}`)}}))}function getMarkerName(e){let t;switch(e.tagName){case"IMG":t=`이미지 : ${e.alt}`;break;case"TABLE":t=`표 : ${e.caption.textContent}`;break;default:t=e.textContent}return t}function queryUpdated(e){return 13!=e.keyCode||(SFUtil.openLink(`https://github.com/Dong-gi/Dong-gi.github.io/search?q=${e.target.value}`,"_blank"),e.stopPropagation(),!1)}function insertCodeDiv(id){return()=>{if(document.getElementById(`code-div-${id}`)){let e=document.getElementById(`code-div-${id}`);SFUtil.toggleClass(e,["w3-hide"]),e.style.maxHeight=window.innerHeight/3+"px"}else{let button=document.getElementById(`code-button-${id}`),path=button.title,xhr=new XMLHttpRequest;xhr.addEventListener("load",(button=>function(e){let div=`<div id="code-div-${id}" class="w3-leftbar w3-border-green code-div"></div>`.asSF().$,lan=button.getAttribute("lan");if(200!=this.status&&(this.responseText="Ajax Failed"),posts.codes[id]=this.responseText,fillCodeDiv(div,lan,this.responseText,button.getAttribute("displayRange")),div.style.maxHeight=window.innerHeight/3+"px","nohighlight"!=lan){let e='<button class="w3-btn w3-round w3-round-xxlarge w3-small w3-blue">모달로 보기</button>'.asSF().$;e.onclick=showModal(id),button.after(e),e.after(div)}else button.after(div);if("javascript"==lan){let script='<button class="w3-btn w3-round w3-round-xxlarge w3-small w3-green">실행</button>'.asSF().$;script.onclick=(id=>function(e){let code=Array.from(document.querySelectorAll(`#code-div-${id} li`)).map((e=>e.textContent)).join("\n");eval(code)})(id),button.after(script)}})(button)),/dong-gi\.github\.io/i.test(location.host)?xhr.open("GET",`${path.startsWith("/")?"":"./"}${path.replace(/ /gm,"%20")}?${(new Date).getTime()}`,!0):xhr.open("GET",`${path.startsWith("/")?"":"./"}${path.replace(/ /gm,"%20")}`,!0),xhr.send()}}}function fillCodeDiv(e,t,o,r){if("nohighlight"!=t){let n=o.replace(/\t/gm,"    ");n=n.replace(/ /gm,"  ");let l=n.split(/\n/gm),a=[];for((r=JSON.parse(r||"[1, 100000000]")||[1,1e8]).length%2==1&&r.push(1e8),r=r.reverse();r.length>0;){let e=[],o=r.pop()-1,n=r.pop();for(let t=o;t<n&&t<l.length;++t)e.push(l[t]);let i=0;for(let t=0;t<e[0].length;++t){let o=!0;for(let r of e)if(/\S/.test(r.charAt(t))&&(o=!1),!o)break;if(!o)break;i++}if(i>0)for(let t=0;t<e.length;++t)e[t]=e[t].substr(i);"text"!=t&&(e=hljs.highlight(t,e.join("\n")).value.split(/\n/gm)),a.push(e)}let i=document.createElement("ol");for(let e of a){for(let o of e)if("text"==t){let e=document.createElement("li");e.innerText=o.replace(/  /gm," "),i.append(e)}else i.append(`<li>${o.replace(/  /gm,"&nbsp;")}</li>`.asSF().$);e!=a[a.length-1]&&i.append(document.createElement("hr"))}e.append(i)}else{let t=o.asSF();if(Array.isArray(t))for(let o of t)e.append(o.$);else e.append(t.$)}}function showModal(e){return()=>{closeSidebar();let t=document.getElementById(`modal-${e}`);if(t)return void(t.style.display="block");t=getCodeModalHTML(e,document.getElementById(`code-button-${e}`).title.split("/").pop()).asSF().$;let o=t.querySelector("header"),r=t.querySelector(".code-modal-body"),n=t.querySelector("footer");document.body.append(t),t.style.display="block",r.innerHTML=document.getElementById(`code-div-${e}`).innerHTML,r.style.height=window.innerHeight-parseFloat(window.getComputedStyle(o).height),n.querySelector("button.copy").onclick=()=>{SFUtil.copyTextToCilpboard(posts.codes[e],t),SFUtil.showSnackbar("복사 완료",t),t.focus()},n.querySelector("button.download").onclick=()=>SFUtil.downloadText(posts.codes[e],document.getElementById(`code-button-${e}`).title.split("/").pop()),n.querySelector("button.print").onclick=()=>SFUtil.printElement(r);for(let o of t.querySelectorAll(".w3-btn.close"))o.onclick=()=>{document.getElementById(`modal-${e}`).style.display="none",isNarrow()||openSidebar()}}}function getCodeModalHTML(e,t){return`<div id="modal-${e}" class="w3-modal code-modal">\n    <div class="w3-modal-content">\n        <header class="w3-container">\n            <h2 style="display: inline-block;" class="modal-title">${t}</h2>\n            <span class="w3-btn w3-circle w3-display-topright close" style="color: black; font-size: 1.5em; font-weight: bold;">&times;</span>\n        </header>\n        <div class="w3-container w3-leftbar w3-border-green code-modal-body code-div"></div>\n        <footer class="w3-container w3-display-bottomright">\n            <button class="w3-btn w3-white w3-border w3-border-green w3-round-xlarge copy">Copy</button>\n            <button class="w3-btn w3-white w3-border w3-border-green w3-round-xlarge download">Download</button>\n            <button class="w3-btn w3-white w3-border w3-border-green w3-round-xlarge print">Print</button>\n            <button class="w3-btn w3-white w3-border w3-border-red w3-round-xlarge close">Close</button>\n        </footer>\n    </div>\n</div>`}fetch("/files/posts-compressed.json").then((e=>e.json())).then((e=>{Object.assign(posts,e),posts.list=posts.list.filter((e=>!Array.isArray(e.category))).concat(posts.list.filter((e=>Array.isArray(e.category))).flatMap((e=>{let t=[];for(let o of e.category)t.push(Object.assign({},e,{category:o}));return t}))),posts.list.sort(((e,t)=>SFUtil.compareString(e.title,t.title))),posts.list.sort(((e,t)=>SFUtil.compareString(e.category,t.category))),updateSidebar(),updatePostList(),updateMarkerList()})),window.addEventListener("load",(()=>{new MutationObserver(mutationCallback).observe(document.body,{attributes:!1,childList:!0,subtree:!0}),mutationCallback([{type:"childList",target:document.body}]),console.log(hljs.listLanguages()),window.onscroll=SFUtil.debounce((function(){if("none"!=document.getElementById("sidebar").style.display)for(let e of document.querySelectorAll(".marker"))if(SFUtil.isElementInViewport(e))return void document.querySelector(`li[marker-id=${e.getAttribute("marker-id")}]`).scrollIntoView()}),300),document.getElementById("query").onkeyup=SFUtil.debounce(queryUpdated,500),SFUtil.addOrderedTableFunctionality();for(let e of document.querySelectorAll(".goto"))e.addEventListener("mousedown",(function(e){localStorage.setItem(`${location.href}-lastPos`,window.scrollY),localStorage.setItem("gotoEvent",!0),setTimeout((()=>localStorage.removeItem("gotoEvent")),1e3)}));if(window.onpopstate=function(e){if(!localStorage.getItem("gotoEvent")&&localStorage.getItem(`${location.href}-lastPos`))return void window.scrollTo({top:localStorage.getItem(`${location.href}-lastPos`)});let t=/#(pos-?\d+)/.exec(location.hash);if(t){let e=document.getElementById(t[1]),o=e;for(;"BODY"!=o.tagName;)"DETAILS"==o.tagName&&(o.open=!0),o=o.parentElement;for(;!e.clientHeight;){if(e.nextSibling&&e.nextSibling.clientHeight){e=e.nextSibling;break}e=e.parentElement}goto(e)}},Array.isArray(window.wizFuncQueue))for(let e of window.wizFuncQueue)try{e()}catch(e){console.log(e)}}));class DKFileList{constructor(e,t,o,r,n,l,a){if(this.target=document.querySelector(t),this.fileAction=o||null,this.openAll=!!r,this.fileHTMLmaker=n||null,this.sort=!!l,this.target.innerHTML="",this.fileMap=new Map,this.rootDir=null,this.callback=a,!this.target)return;let i=new XMLHttpRequest;var s;i.addEventListener("load",(s=this,function(e){if(200!=this.status)return void(s.target.innerHTML="No Data");let t=null;for(let e of this.responseText.replace(/\r/gm,"").split("\n"))e.endsWith(":")?(t=e.slice(0,-1),s.rootDir||(s.rootDir=t),s.fileMap.set(t,[])):e.length>0&&s.fileMap.get(t).push(e);if(this.sort)for(let e of s.fileMap.values())e.sort(SFUtil.compareString);s.updateFileList(s.rootDir),s.callback&&s.callback(this)})),i.open("GET",e,!0),i.send()}updateFileList(e){let t=document.getElementById(`dir-${e.hashCode()}`);if(e==this.rootDir&&!t)return this.target.append(DKFileList.getDirHTML(e,"",!0)),void this.updateFileList(e);let o=t.querySelector("ul");if(!(o.childElementCount>0))for(let t of this.fileMap.get(e)){let r=`${e}/${t}`;if(this.fileMap.has(r)){for(;this.fileMap.has(r)&&1==this.fileMap.get(r).length&&this.fileMap.has(`${r}/${this.fileMap.get(r)[0]}`);)r=`${r}/${this.fileMap.get(r)[0]}`;if(this.fileMap.get(r).length<1)continue;o.append(DKFileList.getDirHTML(r,e,this.openAll));let t=((e,t)=>function(o){e.updateFileList(t)})(this,r);document.getElementById(`dir-${r.hashCode()}`).firstChild.onclick=t,this.openAll&&this.updateFileList(r)}else if(this.fileAction){let r=this.fileHTMLmaker?this.fileHTMLmaker(e,t):DKFileList.getFileHTMLwithoutA(e,t);o.append(r);let n=((e,t,o)=>function(r){e.fileAction(t,o)})(this,e,t);r.onclick=n}else o.append(this.fileHTMLmaker?this.fileHTMLmaker(e,t):DKFileList.getFileHTMLwithA(this.rootDir,e,t))}}static getDirHTML(e,t,o){return`<details ${o?"open":""} id="dir-${e.hashCode()}" class="w3-small file-list" title="${e}"><summary>${e.replace(t,"")}</summary><ul></ul></details>`.asSF().$}static getFileHTMLwithA(e,t,o){return`<li><a href="${`${t.substr(e.length)}/${o}`}">${o}</a></li>`.asSF().$}static getFileHTMLwithoutA(e,t){return`<li title="${`${e}/${t}`}">${t}</li>`.asSF().$}}