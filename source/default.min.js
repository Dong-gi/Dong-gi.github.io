const posts={},LAST_CALL_TIME=Symbol("LAST_CALL_TIME"),SETTIMEOUT_HANDLE=Symbol("SETTIMEOUT_HANDLE"),STRING_HASH_CODE=Symbol("STRING_HASH_CODE");function stringHashCode(e){if(null!=e[STRING_HASH_CODE])return e[STRING_HASH_CODE];let t=0;if(0===e.length)return t;for(let o=0;o<e.length;o++)t=(t<<5)-t+e.charCodeAt(o),t|=0;return e[STRING_HASH_CODE]=t}function asNodes(e){const t=document.createElement("template");t.insertAdjacentHTML("afterbegin",e);for(const e of t.querySelectorAll("script")){const t=document.createElement("script");e.src.length>0&&(t.src=e.src),e.text.length>0&&(t.text=e.text),e.after(t),e.remove()}switch(t.childElementCount){case 0:return null;case 1:return t.firstChild;default:return Array.from(t.childNodes)}}const numPartRegex1=/(((^|[\s$¥£₡₱€₩₭฿])[+-]?)?(\d+(,\d+)*(\.\d+)?)|(\d?\.\d+)|(\d+))/,numPartRegex2=/(([\s$¥£₡₱€₩₭฿][+-]?)?(\d+(,\d+)*(\.\d+)?)|(\d?\.\d+)|(\d+))/,startWithNumberRegex1=new RegExp(`^${numPartRegex1.source}`),startWithNumberRegex2=new RegExp(`^${numPartRegex2.source}`),textPartRegex1=new RegExp(`^((?!${numPartRegex1.source})[\\d\\D])+`,"m"),textPartRegex2=new RegExp(`^((?!${numPartRegex2.source})[\\d\\D])+`,"m");function naturalCompareString(e,t){if(e==t)return 0;const[o,n]=[e,t];for(;;){if(e.length*t.length==0)return e.length-t.length;const r=(e===o?startWithNumberRegex1:startWithNumberRegex2).test(e),a=(t===n?startWithNumberRegex1:startWithNumberRegex2).test(t);if(r&&a){const r=parseFloat(e.match(e===o?startWithNumberRegex1:startWithNumberRegex2)[0].replace(/[^\-\d\.]/g,"")),a=parseFloat(t.match(t===n?startWithNumberRegex1:startWithNumberRegex2)[0].replace(/[^\-\d\.]/g,""));if(Math.abs(r-a)>=Number.EPSILON)return r-a;e=e.replace(e===o?startWithNumberRegex1:startWithNumberRegex2,""),t=t.replace(t===n?startWithNumberRegex1:startWithNumberRegex2,"");continue}if(r)return-1;if(a)return 1;const s=e.match(e===o?textPartRegex1:textPartRegex2)[0],l=t.match(t===n?textPartRegex1:textPartRegex2)[0],i=s.localeCompare(l);if(0!==i)return i;e=e.replace(e===o?textPartRegex1:textPartRegex2,""),t=t.replace(t===n?textPartRegex1:textPartRegex2,"")}}function addOrderedTableFunctionality(){if(document.querySelector("style#ordered-table-css"))return;document.getElementsByTagName("head")[0].append(asNodes('<style id="ordered-table-css">\ntd.sorting-table-head-black:after,th.sorting-table-head-black:after{content:attr(sort-order);color:black}\ntd.sorting-table-head-white:after,th.sorting-table-head-white:after{content:attr(sort-order);color:white;}</style>'));const e=function(e,t){for(const t of e){if("childList"!==t.type)return;const e=t.target.querySelectorAll("table");for(const t of e){if(t.classList.add("w3-table-all","w3-card","w3-small"),t.rows.length<3){t.classList.remove("ordered-table");continue}if(t.classList.contains("ordered-table"))continue;if(t.classList.add("ordered-table"),t.classList.contains("no-sort"))continue;const e=t.rows[0];e.classList.add("table-head-row");const o=new Set;for(const e of Array.from(t.rows).slice(1))e.querySelectorAll("td, th").forEach(((e,t,n)=>{if(o.has(t))return;e.textContent.replace(/null/gim,"").replace(/[\n\s]+/gm,"").length>0&&o.add(t)}));for(const e of t.rows)e.querySelectorAll("td, th").forEach(((e,t,n)=>{o.has(t)||e.remove()}));e.querySelectorAll("td, th").forEach(((e,o,n)=>{e.classList.contains("no-sort")||(e.onclick=tableSorter(o,e,t))}));const n=Array.from(e.querySelectorAll("td[pre-sort], th[pre-sort]"));n.sort(((e,t)=>parseFloat(e.getAttribute("pre-sort"))-parseFloat(t.getAttribute("pre-sort"))));for(const e of n)e.click()}}};new MutationObserver(e).observe(document.body,{attributes:!1,childList:!0,subtree:!0}),e([{type:"childList",target:document.body}])}function tableSorter(e,t,o){const n=getRgba(t);return n[0]+n[1]+n[2]<255*n[3]?t.classList.add("sorting-table-head-white"):t.classList.add("sorting-table-head-black"),t.getAttribute("sort-order")||t.setAttribute("sort-order","●"),function(){const n="▲"!==t.getAttribute("sort-order");t.setAttribute("sort-order",n?"▲":"▼");const r=Array.from(o.rows).slice(1);r.sort(((t,o)=>{const r=naturalCompareString(t.querySelectorAll("td, th")[e].textContent,o.querySelectorAll("td, th")[e].textContent);return n?r:-r}));for(const e of r)o.append(e)}}const rgbaRegex=/(\d+)\D*(\d+)\D*(\d+)\D*(\d*\.?\d*)/;function getRgba(e){const t=window.getComputedStyle(e).getPropertyValue("background-color"),o=rgbaRegex.exec(t);return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3]),t.search("rgba")>=0?parseFloat(o[3]):1]}function debounce(e,t){const o=function(...n){const r=o[LAST_CALL_TIME];o[LAST_CALL_TIME]=Date.now(),o[LAST_CALL_TIME]-r<=t&&clearTimeout(o[SETTIMEOUT_HANDLE]),o[SETTIMEOUT_HANDLE]=setTimeout((()=>e(...n)),t)};return o[LAST_CALL_TIME]=0,o[SETTIMEOUT_HANDLE]=null,o}function openLink(e,t){const o=document.createElement("a");o.href=e,o.target=t??"_blank",document.body.append(o),o.click(),o.remove()}function calcOffset(e){let t={left:e.offsetLeft,top:e.offsetTop};for(;e.offsetParent;)t.left+=e.offsetParent.offsetLeft??0,t.top+=e.offsetParent.offsetTop??0,e=e.offsetParent;return t}function highlight(e){if(!document.getElementById("highlight-css")){const e=asNodes('<style id="highlight-css">@keyframes highlight{from{background:#ff0;box-shadow:0 0 0.5em 0.5em #ff0;padding:0.25em}to{background:#fff;box-shadow:0 0 #fff;padding:0}}</style>');document.getElementsByTagName("head")[0].append(e)}e.style.animation="",setTimeout((()=>{e.style.animation="highlight 2s 1"}),139)}function showSnackbar(e,t,o){if(!document.getElementById("snackbar-css")){const e=asNodes('<style id="snackbar-css">#snackbar{visibility:hidden;min-width:250px;margin-left:-125px;background-color:#333;color:#fff;text-align:center;border-radius:2px;padding:16px;position:fixed;z-index:1000000;left:50%;bottom:30px;font-size:17px}\n#snackbar.show{visibility:visible;-webkit-animation:sf-fadein 0.5s,sf-fadeout 0.5s 2.5s;animation:sf-fadein 0.5s,sf-fadeout 0.5s 2.5s}\n@-webkit-keyframes sf-fadein{from{bottom:0;opacity:0}to{bottom:30px;opacity:1}}\n@keyframes sf-fadein{from{bottom:0;opacity:0}to{bottom:30px;opacity:1}}\n@-webkit-keyframes sf-fadeout{from{bottom:30px;opacity:1}to{bottom:0;opacity:0}}\n@keyframes sf-fadeout{from{bottom:30px;opacity:1}to{bottom:0;opacity:0}}</style>');document.getElementsByTagName("head")[0].append(e)}const n=asNodes(`<div id="snackbar" class="show">${e}</div>`);(t??document.body).append(n),setTimeout((()=>n.remove()),o??2e3)}function addHoverContent(e,t){const o=getRgba(e);e.style.backgroundColor=`rgba(${o[0]}, ${o[1]}, ${o[2]}, ${o[3]>.9?o[3]:o[3]+.1})`,t.style.position="absolute",t.style.display="none";const n=function(o){if("none"!==t.style.display){for(const n of[calcOffset(e),calcOffset(t)])if(n.left<o.pageX&&o.pageX<n.left+e.offsetWidth&&n.top<o.pageY&&o.pageY<n.top+e.offsetHeight)return;t.style.display="none"}};e.addEventListener("mouseenter",(function(e){"block"!==t.style.display&&(t.style.display="block",t.style.top=e.pageY+"px",t.style.left=e.pageX+"px",t.style.maxWidth=window.innerWidth-e.clientX+"px",t.style.maxHeight=window.innerHeight-e.clientY+"px",t.style.overflow="auto")})),e.addEventListener("mouseleave",debounce(n,300)),t.addEventListener("mouseleave",debounce(n,300))}function copyTextToCilpboard(e,t){const o=document.createElement("textarea");o.textContent=e,(t??document.body).append(o),o.select(),navigator.clipboard.writeText(o.textContent),o.remove()}function downloadText(e,t){const o=document.createElement("a");o.href=URL.createObjectURL(new Blob([e],{type:"text/plain;charset=utf-8;"})),o.target="_blank",o.download=t??"text.txt",document.body.append(o),o.click(),o.remove()}function printElement(e){const t=window.scrollY,o=document.getElementsByTagName("html")[0],n=asNodes(`<print>${e.innerHTML}</print>`);o.append(n),document.body.style.display="none",window.print(),document.body.style.display="block",n.remove(),window.scrollTo(0,t)}function toggleClass(e,t){for(const o of t)e.classList.contains(o)?e.classList.remove(o):e.classList.add(o)}function goto(e){highlight(e);for(let t=e;"BODY"!==t.tagName;t=t.parentNode)"DETAILS"===t.tagName&&(t.open=!0);setTimeout((()=>window.scrollTo({top:calcOffset(e).top-document.getElementById("nav").clientHeight})),100)}function isNarrow(){return document.getElementById("nav").clientWidth<=1234}function updateSidebar(){isNarrow()?closeSidebar():openSidebar(),document.getElementById("sidebar").style.width="333px"}function openSidebar(){document.getElementById("main").style.marginLeft="333px",document.getElementById("sidebar").style.display="block"}function closeSidebar(){document.getElementById("main").style.marginLeft="0",document.getElementById("sidebar").style.display="none"}function toggleSidebar(){"none"===document.getElementById("sidebar").style.display?openSidebar():closeSidebar()}function updatePostList(){const e=new Map,t=new Map,o=asNodes('<details open class="w3-small file-list"><summary>Category</summary><ul></ul></details>');for(const n of posts.list){const r=n.category.split("/"),a=location.href.search(n.file)>=0;let s=null;for(let t=0;t<r.length;++t){const n=r.slice(0,t+1).join("/");if(e.has(n)){s=e.get(n),s.open||=a;continue}const l=asNodes(`<details class="w3-small file-list" title="${n}"><summary>${r[t]}</summary><ul></ul></details>`);e.set(n,l),null!=s?s.querySelector("ul").append(l):o.querySelector("ul").append(l),s=l,s.open||=a}t.has(n.category)||t.set(n.category,[]),t.get(n.category).push(n)}for(const o of t.keys()){const n=e.get(o).querySelector("ul"),r=t.get(o);for(const e of r){const t=location.href.search(e.file)>=0;n.append(asNodes(`<li><a ${t?'class="w3-yellow"':""} href="/posts/${e.file}">${e.title}</a></li>`))}}document.getElementById("post-list").append(o)}function updateMarkerList(){for(const e of document.querySelectorAll("h1,h2,h3,h4,h5,h6"))e.classList.add("marker");const e=asNodes('<details open class="w3-small file-list"><summary>Content</summary><ul></ul></details>'),t=e.querySelector("ul"),o=document.querySelector("div#contents"),n=new Set(["THEAD","TBODY","TR","SPAN"]),r=[0,0,0,0,0,0,0,0],a=new Set(["H1","H2","H3","H4","H5","H6"]);for(const e of document.querySelectorAll(".marker:not(.no-marker)")){const s=`pos${stringHashCode(e.textContent)}`;e.before(asNodes(`<span class="pos-span" id="${s}"></span>`));const l=makeMarkerName(e),i=asNodes(`<li class="${e.classList.contains("fake")?"w3-hide":""}">\n    <a title="${l}" href="#${s}"></a>\n</li>`);let c=0,d=e.parentElement;for(;d!==o;)d=d.parentElement,n.has(d.tagName)||(c+=1);i.classList.add(`margin-left-${c}`),r[c]+=1,r.fill(0,c+1);const u=`${r.filter((e=>e>0)).join(".")}. `;i.querySelector("a").textContent=`${u}${l.substring(0,50)}`,a.has(e.tagName)&&(e.textContent=`${u}${e.textContent}`),t.append(i)}document.getElementById("marker-list").append(e)}function makeMarkerName(e){switch(e.tagName){case"IMG":return`이미지 : ${e.alt}`;case"TABLE":return`표 : ${e.caption.textContent}`;case"DETAILS":return e.firstChild.textContent;default:return e.textContent}}function fillCodeDiv(e,t,o,n){if("nohighlight"!==t){const r=o.replace(/\t/gm,"    ").replace(/ /gm,"  ").split(/\n/gm),a=[];for((n=JSON.parse(n||"[1, 100000000]")??[1,1e8]).length%2==1&&n.push(1e8),n.reverse();n.length>0;){let e=[];const o=n.pop()-1,s=n.pop();let l=1e4;for(let t=o;t<s&&t<r.length;++t){const o=r[t];e.push(o);for(let e=0;e<l;++e)if(e>=o.length||32!==o.charCodeAt[e]){l=e;break}}l>0&&(e=e.map((e=>e.slice(l)))),"text"!==t&&(e=hljs.highlight(e.join("\n"),{language:t,ignoreIllegals:!0}).value.split(/\n/gm)),a.push(e)}const s=document.createElement("ol");for(const e of a){for(const o of e)if("text"===t){const e=document.createElement("li");e.innerText=o.replace(/  /gm," "),s.append(e)}else s.append(asNodes(`<li>${o.replace(/  /gm,"&nbsp;")}</li>`));e!==a[a.length-1]&&s.append(document.createElement("hr"))}e.append(s)}else{const t=asNodes(o);Array.isArray(t)?e.append(...t):e.append(t)}}function showModal(e){document.getElementById("main").style.display="none";let t=document.getElementById(`code-modal-${e}`);if(t)return void(t.style.display="block");t=asNodes(`<div id="code-modal-${e}" class="w3-modal code-modal">\n    <div class="w3-modal-content">\n        <header class="w3-container">\n            <h2 style="display: inline-block;" class="modal-title">${document.getElementById(`code-button-${e}`).title.split("/").pop()}</h2>\n            <span class="w3-btn w3-circle w3-display-topright close" style="color: black; font-size: 1.5em; font-weight: bold;">&times;</span>\n        </header>\n        <div class="w3-container w3-leftbar w3-border-green code-modal-body code-div"></div>\n        <footer class="w3-container w3-display-bottomright">\n            <button class="w3-btn w3-white w3-border w3-border-green w3-round-xlarge copy">Copy</button>\n            <button class="w3-btn w3-white w3-border w3-border-green w3-round-xlarge download">Download</button>\n            <button class="w3-btn w3-white w3-border w3-border-green w3-round-xlarge print">Print</button>\n            <button class="w3-btn w3-white w3-border w3-border-red w3-round-xlarge close">Close</button>\n        </footer>\n    </div>\n</div>`),t.style.display="block";const o=t.querySelector("header"),n=t.querySelector(".code-modal-body"),r=t.querySelector("footer");n.innerHTML=document.getElementById(`code-div-${e}`).innerHTML,n.style.height=window.innerHeight-parseFloat(window.getComputedStyle(o).height),r.querySelector("button.copy").onclick=function(){copyTextToCilpboard(posts.codes[e],t),showSnackbar("복사 완료",t),t.focus()},r.querySelector("button.download").onclick=function(){downloadText(posts.codes[e],document.getElementById(`code-button-${e}`).title.split("/").pop())},r.querySelector("button.print").onclick=function(){printElement(asNodes(`<div>${o.innerHTML}${n.innerHTML}</div>`))};for(const e of t.querySelectorAll(".close"))e.onclick=function(){t.style.display="none",document.getElementById("main").style.display="block",isNarrow()||openSidebar()};document.body.append(t)}window.addEventListener("load",(async()=>{const mutationCallback=function(mutations,observer){for(let mutation of mutations){if("childList"!==mutation.type)return;for(const e of mutation.target.querySelectorAll("img"))e.onclick||(e.onclick=function(e){openLink(e.target.src,"_blank")});for(const codeButton of mutation.target.querySelectorAll("button.btn-code"))codeButton.classList.remove("btn-code"),codeButton.id="code-button-"+Math.random().toString().slice(2)+stringHashCode(codeButton.title),codeButton.onclick=function(e){const button=e.target,path=button.title,codeId=button.id.slice(12),codeDivId="code-div-"+codeId;if(document.getElementById(codeDivId)){const e=document.getElementById(`code-div-${codeId}`);toggleClass(e,["w3-hide"]),e.style.maxHeight=window.innerHeight/3+"px"}else{const xhr=new XMLHttpRequest;xhr.addEventListener("load",(function(){200!==this.status&&(this.responseText="Ajax Failed");const codeDiv=asNodes(`<div id="${codeDivId}" class="w3-leftbar w3-border-green code-div"></div>`),lan=button.getAttribute("lan");if(posts.codes[codeId]=this.responseText,fillCodeDiv(codeDiv,lan,this.responseText,button.getAttribute("displayRange")),codeDiv.style.maxHeight=window.innerHeight/3+"px","nohighlight"!==lan){const e=asNodes('<button class="w3-btn w3-round w3-round-xxlarge w3-small w3-blue">모달로 보기</button>');e.onclick=()=>showModal(codeId),button.after(e),e.after(codeDiv)}else button.after(codeDiv);if("javascript"===lan){const script=asNodes('<button class="w3-btn w3-round w3-round-xxlarge w3-small w3-green">실행</button>');script.onclick=function(){const code=Array.from(codeDiv.querySelectorAll("li")).map((e=>e.textContent)).join("\n");eval(code)},button.after(script)}})),xhr.open("GET",`${path.startsWith("/")?"":"./"}${path.replace(/ /gm,"%20")}?${Date.now()}`,!0),xhr.send()}};for(const e of mutation.target.querySelectorAll(".hover-content"))addHoverContent(e,document.getElementById(e.getAttribute("template-id")));for(const e of mutation.target.querySelectorAll("div.as-code")){e.classList.remove("as-code");const t=e.innerHTML.trim().replace(/&lt;/gm,"<").replace(/&gt;/gm,">").replace(/&amp;/gm,"&");e.innerHTML="",fillCodeDiv(e,e.getAttribute("lan")??"text",t),e.style.maxHeight=window.innerHeight/3+"px"}for(const e of mutation.target.querySelectorAll("span.as-code")){e.classList.remove("as-code");const t=e.innerHTML.trim().replace(/&lt;/gm,"<").replace(/&gt;/gm,">").replace(/&amp;/gm,"&");e.innerHTML=hljs.highlight(t,{language:e.getAttribute("lan")??"text",ignoreIllegals:!0}).value}}};new MutationObserver(mutationCallback).observe(document.body,{attributes:!1,childList:!0,subtree:!0}),mutationCallback([{type:"childList",target:document.body}]),console.log(hljs.listLanguages()),document.getElementById("query").onkeyup=function(e){return"Enter"!==e.code||(openLink(`https://github.com/search?q=repo:Dong-gi/Dong-gi.github.io+${encodeURIComponent(e.target.value)}&type=code`,"_blank"),e.stopPropagation(),!1)},addOrderedTableFunctionality();for(const e of document.querySelectorAll(".goto"))e.addEventListener("click",(function(){0===e.id.length&&(e.id=`goto-${Math.random()}-${Math.random()}`),history.pushState({},"",`#${e.id}`)}));window.onpopstate=function(){if(location.hash.length<=1)return void console.log("No location.hash");let e=document.getElementById(location.hash.slice(1));if(null!=e){for(;!e.clientHeight;){let t=!1;for(;e.nextSibling;)if(e.nextSibling.clientHeight){e=e.nextSibling,t=!0;break}if(t)break;e=e.parentElement}goto(e)}else console.log("No target")},await fetch("/files/posts-compressed.json").then((e=>e.json())).then((e=>{Object.assign(posts,e),posts.list=[...posts.list.filter((e=>!Array.isArray(e.category))),...posts.list.filter((e=>Array.isArray(e.category))).flatMap((e=>e.category.map((t=>Object.assign({},e,{category:t})))))].sort(((e,t)=>{const o=naturalCompareString(e.category,t.category);return 0!==o?o:naturalCompareString(e.title,t.title)})),updateSidebar(),updatePostList(),updateMarkerList(),window.onpopstate()}))}));