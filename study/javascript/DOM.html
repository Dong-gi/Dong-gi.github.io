<?php
header('Content-Type: text/html; charset=utf-8');
setlocale(LC_TIME, "kr_KR.utf8");
date_default_timezone_set('Asia/Seoul');

$server_root_path = $_SERVER['DOCUMENT_ROOT'];
include $server_root_path.'/lib/create_code_page.php';

putHeader();
putTitle("Document Object Model");
?>

<p>document 관련 객체</p>

<p><button onclick="func1()">결과 확인 1</button>
<button onclick="func2()">결과 확인 2</button></p>
<div id='result' height='auto'></div>
<script>
	function func1() {
		//var body = document.body;
		var body = document.getElementById('result');
		var img = document.createElement('img');
		img.src = 'https://image.flaticon.com/icons/svg/53/53260.svg';
		img.width = 120;
		img.setAttribute('myAttribute', 'Hello World');
		var p = document.createElement('p');
		p.id = 'p1';
		p.innerHTML = 'Icons made by <a href="http://www.freepik.com" title="Freepik">Freepik</a> from <a href="http://www.flaticon.com" title="Flaticon">www.flaticon.com</a> is licensed by <a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY</a>';
		body.appendChild(img);
		body.appendChild(p);
		p.style.color = '#0055aa';
		p.style.backgroundColor = '#ffaa00';
		body.innerHTML += '<p>' + p.innerHTML + '</p>';
		// body.removeChild(p); // innerHTML을 직접 이용하여 DOM 구조가 날라갔다.
		// https://stackoverflow.com/questions/45137739/is-there-a-child-node-live-range
		setTimeout(function() {
			body.removeChild(document.getElementById('p1'));
		}, 2000);
	}
	function func2() {
		var body = document.getElementById('result');
		body.style.minHeight = '600';
		var img = document.createElement('img');
		img.src = 'https://image.flaticon.com/icons/svg/53/53260.svg';
		img.width = 120;
		img.style.cssFloat = 'left'
		img.style.position = 'fixed';
		img.style.paddingLeft = 300;
		img.style.paddingTop = 300;
		img.style.zIndex = 3;
		img.id = 'img1';
		body.appendChild(img);
		img = document.getElementById('img1');
		var img2 = img.cloneNode();
		img2.id = 'img2';
		img2.style.zIndex = 5;
		body.appendChild(img2);
		img2 = document.getElementById('img2');
		var theta = 0;
		var radius = 60;
		var fps = 30;
		setInterval(function(){
			// 'px'이 포함되어 있으므로 parse 필요
			img2.style.paddingLeft = parseInt(img.style.paddingLeft) + radius * Math.cos(theta);
			img2.style.paddingTop = parseInt(img.style.paddingTop) + radius * Math.sin(theta);
			theta = (theta + Math.PI / fps);
		}, 1000 / fps);
	}
</script>

<pre style="background:#0c1021;color:#f8f8f8"><span style="color:#fbde2d">function</span> <span style="color:#ff6400">func1</span>() {
    <span style="color:#fbde2d">var</span> body <span style="color:#fbde2d">=</span> <span style="color:#8da6ce">document</span>.<span style="color:#8da6ce">body</span>;
    <span style="color:#fbde2d">var</span> img <span style="color:#fbde2d">=</span> <span style="color:#8da6ce">document</span>.<span style="color:#8da6ce">createElement</span>(<span style="color:#61ce3c">'img'</span>);
    img.<span style="color:#8da6ce">src</span> <span style="color:#fbde2d">=</span> <span style="color:#61ce3c">'https://image.flaticon.com/icons/svg/53/53260.svg'</span>;
    img.<span style="color:#8da6ce">width</span> <span style="color:#fbde2d">=</span> <span style="color:#d8fa3c">120</span>;
    img.<span style="color:#8da6ce">setAttribute</span>(<span style="color:#61ce3c">'myAttribute'</span>, <span style="color:#61ce3c">'Hello World'</span>);
    <span style="color:#fbde2d">var</span> p <span style="color:#fbde2d">=</span> <span style="color:#8da6ce">document</span>.<span style="color:#8da6ce">createElement</span>(<span style="color:#61ce3c">'p'</span>);
    p.<span style="color:#8da6ce">id</span> <span style="color:#fbde2d">=</span> <span style="color:#61ce3c">'p1'</span>;
    p.innerHTML <span style="color:#fbde2d">=</span> <span style="color:#61ce3c">'Icons made by &lt;a href="http://www.freepik.com" title="Freepik">Freepik&lt;/a> from &lt;a href="http://www.flaticon.com" title="Flaticon">www.flaticon.com&lt;/a> is licensed by &lt;a href="http://creativecommons.org/licenses/by/3.0/" title="Creative Commons BY 3.0" target="_blank">CC 3.0 BY&lt;/a>'</span>;
    body.<span style="color:#8da6ce">appendChild</span>(img);
    body.<span style="color:#8da6ce">appendChild</span>(p);
    p.<span style="color:#8da6ce">style</span>.<span style="color:#8da6ce">color</span> <span style="color:#fbde2d">=</span> <span style="color:#61ce3c">'#0055aa'</span>;
    p.<span style="color:#8da6ce">style</span>.<span style="color:#8da6ce">backgroundColor</span> <span style="color:#fbde2d">=</span> <span style="color:#61ce3c">'#ffaa00'</span>;
    body.innerHTML <span style="color:#fbde2d">+</span><span style="color:#fbde2d">=</span> <span style="color:#61ce3c">'&lt;p>'</span> <span style="color:#fbde2d">+</span> p.innerHTML <span style="color:#fbde2d">+</span> <span style="color:#61ce3c">'&lt;/p>'</span>;
    <span style="color:#aeaeae">// body.removeChild(p); // innerHTML을 직접 이용하여 DOM 구조가 날라갔다.</span>
    <span style="color:#aeaeae">// https://stackoverflow.com/questions/45137739/is-there-a-child-node-live-range</span>
    <span style="color:#8da6ce">setTimeout</span>(<span style="color:#fbde2d">function</span>() {
        body.<span style="color:#8da6ce">removeChild</span>(<span style="color:#8da6ce">document</span>.<span style="color:#8da6ce">getElementById</span>(<span style="color:#61ce3c">'p1'</span>));
    }, <span style="color:#d8fa3c">2000</span>);
}
<span style="color:#fbde2d">function</span> <span style="color:#ff6400">func2</span>() {
    <span style="color:#fbde2d">var</span> img <span style="color:#fbde2d">=</span> <span style="color:#8da6ce">document</span>.<span style="color:#8da6ce">createElement</span>(<span style="color:#61ce3c">'img'</span>);
    img.<span style="color:#8da6ce">src</span> <span style="color:#fbde2d">=</span> <span style="color:#61ce3c">'https://image.flaticon.com/icons/svg/53/53260.svg'</span>;
    img.<span style="color:#8da6ce">width</span> <span style="color:#fbde2d">=</span> <span style="color:#d8fa3c">120</span>;
    img.<span style="color:#8da6ce">style</span>.cssFloat <span style="color:#fbde2d">=</span> <span style="color:#61ce3c">'left'</span>
    img.<span style="color:#8da6ce">style</span>.position <span style="color:#fbde2d">=</span> <span style="color:#61ce3c">'absolute'</span>;
    img.<span style="color:#8da6ce">style</span>.<span style="color:#8da6ce">marginLeft</span> <span style="color:#fbde2d">=</span> <span style="color:#d8fa3c">300</span>;
    img.<span style="color:#8da6ce">style</span>.<span style="color:#8da6ce">marginTop</span> <span style="color:#fbde2d">=</span> <span style="color:#d8fa3c">300</span>;
    img.<span style="color:#8da6ce">style</span>.<span style="color:#8da6ce">zIndex</span> <span style="color:#fbde2d">=</span> <span style="color:#d8fa3c">3</span>;
    img.<span style="color:#8da6ce">id</span> <span style="color:#fbde2d">=</span> <span style="color:#61ce3c">'img1'</span>;
    <span style="color:#8da6ce">document</span>.<span style="color:#8da6ce">body</span>.<span style="color:#8da6ce">appendChild</span>(img);
    img <span style="color:#fbde2d">=</span> <span style="color:#8da6ce">document</span>.<span style="color:#8da6ce">getElementById</span>(<span style="color:#61ce3c">'img1'</span>);
    <span style="color:#fbde2d">var</span> img2 <span style="color:#fbde2d">=</span> img.<span style="color:#8da6ce">cloneNode</span>();
    img2.<span style="color:#8da6ce">id</span> <span style="color:#fbde2d">=</span> <span style="color:#61ce3c">'img2'</span>;
    img2.<span style="color:#8da6ce">style</span>.<span style="color:#8da6ce">zIndex</span> <span style="color:#fbde2d">=</span> <span style="color:#d8fa3c">5</span>;
    <span style="color:#8da6ce">document</span>.<span style="color:#8da6ce">body</span>.<span style="color:#8da6ce">appendChild</span>(img2);
    img2 <span style="color:#fbde2d">=</span> <span style="color:#8da6ce">document</span>.<span style="color:#8da6ce">getElementById</span>(<span style="color:#61ce3c">'img2'</span>);
    <span style="color:#fbde2d">var</span> theta <span style="color:#fbde2d">=</span> <span style="color:#d8fa3c">0</span>;
    <span style="color:#fbde2d">var</span> radius <span style="color:#fbde2d">=</span> <span style="color:#d8fa3c">60</span>;
    <span style="color:#fbde2d">var</span> fps <span style="color:#fbde2d">=</span> <span style="color:#d8fa3c">30</span>;
    <span style="color:#8da6ce">setInterval</span>(<span style="color:#fbde2d">function</span>(){
        <span style="color:#aeaeae">// 'px'이 포함되어 있으므로 parse 필요</span>
        img2.<span style="color:#8da6ce">style</span>.<span style="color:#8da6ce">marginLeft</span> <span style="color:#fbde2d">=</span> <span style="color:#8da6ce">parseInt</span>(img.<span style="color:#8da6ce">style</span>.<span style="color:#8da6ce">marginLeft</span>) <span style="color:#fbde2d">+</span> radius <span style="color:#fbde2d">*</span> <span style="color:#8da6ce">Math</span>.<span style="color:#8da6ce">cos</span>(theta);
        img2.<span style="color:#8da6ce">style</span>.<span style="color:#8da6ce">marginTop</span> <span style="color:#fbde2d">=</span> <span style="color:#8da6ce">parseInt</span>(img.<span style="color:#8da6ce">style</span>.<span style="color:#8da6ce">marginTop</span>) <span style="color:#fbde2d">+</span> radius <span style="color:#fbde2d">*</span> <span style="color:#8da6ce">Math</span>.<span style="color:#8da6ce">sin</span>(theta);
        theta <span style="color:#fbde2d">=</span> (theta <span style="color:#fbde2d">+</span> <span style="color:#8da6ce">Math</span>.<span style="color:#8da6ce">PI</span> / fps);
    }, <span style="color:#d8fa3c">1000</span> / fps);
}
</pre>

<?php
putFooter();
?>

