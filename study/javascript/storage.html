<?php
header('Content-Type: text/html; charset=utf-8');
setlocale(LC_TIME, "kr_KR.utf8");
date_default_timezone_set('Asia/Seoul');

$server_root_path = $_SERVER['DOCUMENT_ROOT'];
include $server_root_path.'/lib/create_code_page.php';

putHeader();
putTitle("window.localStorage");
?>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>
	function sleep(ms) {
		return new Promise(resolve => setTimeout(resolve, ms));
	}
</script>

<input type="text" id="key" value="키"/>
<input type="text" id="value" value="값"/>
<button onclick="func1()">저장</button>
<button onclick="func2()">삭제</button>
<button onclick="func3()">초기화</button>

<script>
	jQuery(document).ready(function() {
		// sessionStorage : 브라우저 종료 시 초기화
		if(!window.localStorage) {
			alert('로컬저장소를 사용할 수 없음');
			window.close();
		}
	});
	function func1() {
		window.localStorage.setItem(jQuery('#key').val(), jQuery('#value').val());
		console.log(window.localStorage);
	}
	function func2() {
		window.localStorage.removeItem(jQuery('#key').val());
		console.log(window.localStorage);
	}
	function func3() {
		window.localStorage.clear();
		console.log(window.localStorage);
	}
</script>

<pre style="background:#0c1021;color:#f8f8f8">jQuery(<span style="color:#8da6ce">document</span>).ready(<span style="color:#fbde2d">function</span>() {
    <span style="color:#aeaeae">// sessionStorage : 브라우저 종료 시 초기화</span>
    <span style="color:#fbde2d">if</span>(<span style="color:#fbde2d">!</span><span style="color:#8da6ce">window</span>.localStorage) {
        <span style="color:#8da6ce">alert</span>(<span style="color:#61ce3c">'로컬저장소를 사용할 수 없음'</span>);
        <span style="color:#8da6ce">window</span>.<span style="color:#8da6ce">close</span>();
    }
});
<span style="color:#fbde2d">function</span> <span style="color:#ff6400">func1</span>() {
    <span style="color:#8da6ce">window</span>.localStorage.setItem(jQuery(<span style="color:#61ce3c">'#key'</span>).val(), jQuery(<span style="color:#61ce3c">'#value'</span>).val());
    <span style="color:#ff6400">console</span><span style="color:#8da6ce">.log</span>(<span style="color:#8da6ce">window</span>.localStorage);
}
<span style="color:#fbde2d">function</span> <span style="color:#ff6400">func2</span>() {
    <span style="color:#8da6ce">window</span>.localStorage.removeItem(jQuery(<span style="color:#61ce3c">'#key'</span>).val());
    <span style="color:#ff6400">console</span><span style="color:#8da6ce">.log</span>(<span style="color:#8da6ce">window</span>.localStorage);
}
<span style="color:#fbde2d">function</span> <span style="color:#ff6400">func3</span>() {
    <span style="color:#8da6ce">window</span>.localStorage.<span style="color:#8da6ce">clear</span>();
    <span style="color:#ff6400">console</span><span style="color:#8da6ce">.log</span>(<span style="color:#8da6ce">window</span>.localStorage);
}
</pre>

<?php
putFooter();
?>

