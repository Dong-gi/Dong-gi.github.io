<pre class="hljs" style="display: block; overflow-x: auto; padding: 0.5em; color: rgb(0, 0, 0); background: rgb(255, 255, 255);"><span class="hljs-meta" style="color: olive;">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;jni.h&gt;</span></span>
<span class="hljs-meta" style="color: olive;">#<span class="hljs-meta-keyword">include</span> <span class="hljs-string" style="font-weight: 700; color: green;">"Test.h"</span></span>
<span class="hljs-meta" style="color: olive;">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-function">JNIEXPORT <span class="hljs-keyword" style="font-weight: 700; color: navy;">void</span> JNICALL <span class="hljs-title" style="font-weight: 400; color: rgb(0, 0, 0);">Java_Test_test</span><span class="hljs-params">(JNIEnv *env, jobject obj)</span>
</span>{
    jclass cls;
    jfieldID fid;
    jint i;

    <span class="hljs-built_in">printf</span>(<span class="hljs-string" style="font-weight: 700; color: green;">"Starting the native method.\n"</span>);
    cls = (*env)-&gt;GetObjectClass(env, obj);
    fid = (*env)-&gt;GetFieldID(env, cls, <span class="hljs-string" style="font-weight: 700; color: green;">"i"</span>, <span class="hljs-string" style="font-weight: 700; color: green;">"I"</span>);

    <span class="hljs-keyword" style="font-weight: 700; color: navy;">if</span>(fid == <span class="hljs-number" style="color: rgb(0, 0, 255); font-weight: 400;">0</span>) <span class="hljs-keyword" style="font-weight: 700; color: navy;">return</span>;
    i = (*env)-&gt;GetIntField(env, obj, fid);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string" style="font-weight: 700; color: green;">"i = %d\n"</span>, i);
    (*env)-&gt;SetIntField(env, obj, fid, i+<span class="hljs-number" style="color: rgb(0, 0, 255); font-weight: 400;">10</span>);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string" style="font-weight: 700; color: green;">"End of the native method.\n"</span>);
}</pre>