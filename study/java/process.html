<pre class="hljs" style="display: block; overflow-x: auto; padding: 0.5em; color: rgb(0, 0, 0); background: rgb(255, 255, 255);"><span class="hljs-keyword" style="font-weight: 700; color: navy;">import</span> java.io.PrintWriter;
<span class="hljs-keyword" style="font-weight: 700; color: navy;">import</span> java.util.Scanner;

<span class="hljs-keyword" style="font-weight: 700; color: navy;">public</span> <span class="hljs-class"><span class="hljs-keyword" style="font-weight: 700; color: navy;">class</span> <span class="hljs-title" style="font-weight: 400; color: rgb(0, 0, 0);">Test</span></span>{
	<span class="hljs-function"><span class="hljs-keyword" style="font-weight: 700; color: navy;">public</span> <span class="hljs-keyword" style="font-weight: 700; color: navy;">static</span> <span class="hljs-keyword" style="font-weight: 700; color: navy;">void</span> <span class="hljs-title" style="font-weight: 400; color: rgb(0, 0, 0);">main</span><span class="hljs-params">(String[] args)</span> </span>{
		<span class="hljs-keyword" style="font-weight: 700; color: navy;">try</span> {
			<span class="hljs-comment" style="color: grey; font-style: italic;">//Process p = Runtime.getRuntime().exec("F:\\Java\\Test\\test.exe");</span>
			Process p = <span class="hljs-keyword" style="font-weight: 700; color: navy;">new</span> ProcessBuilder(<span class="hljs-string" style="font-weight: 700; color: green;">"F:\\Java\\Test\\test.exe"</span>).start();
			<span class="hljs-keyword" style="font-weight: 700; color: navy;">final</span> PrintWriter w = <span class="hljs-keyword" style="font-weight: 700; color: navy;">new</span> PrintWriter(p.getOutputStream());
			<span class="hljs-keyword" style="font-weight: 700; color: navy;">final</span> Scanner s = <span class="hljs-keyword" style="font-weight: 700; color: navy;">new</span> Scanner(p.getInputStream());

			Thread t = <span class="hljs-keyword" style="font-weight: 700; color: navy;">new</span> Thread(()-&gt; {
				<span class="hljs-keyword" style="font-weight: 700; color: navy;">try</span> {
					<span class="hljs-keyword" style="font-weight: 700; color: navy;">while</span>(<span class="hljs-keyword" style="font-weight: 700; color: navy;">true</span>) System.out.println(s.nextLine());
				} <span class="hljs-keyword" style="font-weight: 700; color: navy;">catch</span>(Exception e) {}
			});
			t.start();
			
			<span class="hljs-keyword" style="font-weight: 700; color: navy;">for</span>(<span class="hljs-keyword" style="font-weight: 700; color: navy;">int</span> i = <span class="hljs-number" style="color: rgb(0, 0, 255); font-weight: 400;">0</span>; i &lt; <span class="hljs-number" style="color: rgb(0, 0, 255); font-weight: 400;">15</span>; ++i) {
				w.println(i + <span class="hljs-string" style="font-weight: 700; color: green;">"\n"</span>);
				w.flush();
			}
			t.interrupt();
			p.destroy();
			
			System.out.println(<span class="hljs-string" style="font-weight: 700; color: green;">"exit with 1 : "</span> + p.exitValue());
			p.waitFor();
			System.out.println(<span class="hljs-string" style="font-weight: 700; color: green;">"exit with 2 : "</span> + p.exitValue());
		} <span class="hljs-keyword" style="font-weight: 700; color: navy;">catch</span> (Exception e) {e.printStackTrace();}
	}
}</pre>