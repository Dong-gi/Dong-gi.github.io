<pre style="background:#0c1021;color:#f8f8f8">
<span style="color:#fbde2d">class</span> <span style="color:#ff6400">Sub</span> <span style="color:#fbde2d">extends</span> <span style="color:#ff6400;font-style:italic">Main</span> {}

<span style="color:#aeaeae">// Object.clone()의 접근제한자는 protected이다.</span>
<span style="color:#aeaeae">// 이는 얕은 복사본의 이용으로 원본 객체까지 변경되는 것을 막기 위함이다.</span>
<span style="color:#aeaeae">// clone()을 재정의할 때, Cloneable 마커 인터페이스를 구체화하는데,</span>
<span style="color:#aeaeae">// 마커 인터페이스는 추상 메소드 없이, 클래스가 단순히 해당 기능을 가짐을 나타낸다.</span>
<span style="color:#aeaeae">// compareTo() 메소드를 오버라이드할 때, Comparable 인터페이스를 구체화한다.</span>
<span style="color:#fbde2d">public</span> <span style="color:#fbde2d">class</span> <span style="color:#ff6400">Main</span> <span style="color:#fbde2d">implements</span> <span style="color:#ff6400;font-style:italic">Cloneable</span>, <span style="color:#ff6400;font-style:italic">Comparable&lt;<span style="color:#fbde2d">Main</span>></span> {
    <span style="color:#fbde2d">private</span> <span style="color:#fbde2d">int</span> num <span style="color:#fbde2d">=</span> <span style="color:#d8fa3c">0</span>;
    <span style="color:#fbde2d">private</span> <span style="color:#fbde2d">String</span> string <span style="color:#fbde2d">=</span> <span style="color:#61ce3c">"Hello World"</span>;

    <span style="color:#fbde2d">public</span> <span style="color:#fbde2d">static</span> <span style="color:#fbde2d">void</span> <span style="color:#ff6400">main</span>(<span style="color:#fbde2d">String</span>[] args) <span style="color:#fbde2d">throws</span> <span style="color:#fbde2d">Exception</span> {
        <span style="color:#fbde2d">Main</span> main1 <span style="color:#fbde2d">=</span> <span style="color:#fbde2d">new</span> <span style="color:#fbde2d">Main</span>();
        <span style="color:#fbde2d">Main</span> main2 <span style="color:#fbde2d">=</span> main1<span style="color:#fbde2d">.</span>clone();

        <span style="color:#fbde2d">Main</span> main <span style="color:#fbde2d">=</span> <span style="color:#fbde2d">new</span> <span style="color:#fbde2d">Sub</span>(); <span style="color:#aeaeae">// 업캐스팅, 부모의 참조 변수로 자손의 객체를 가리킬 수 있다.</span>
        <span style="color:#fbde2d">Main</span>[] mains <span style="color:#fbde2d">=</span> {<span style="color:#fbde2d">new</span> <span style="color:#fbde2d">Main</span>(), <span style="color:#fbde2d">new</span> <span style="color:#fbde2d">Sub</span>()};
        <span style="color:#aeaeae">// Sub[] subs = (Sub[])mains; // 배열 다운캐스팅. 실제로 모든 요소가 자식 타입이어야만 가능</span>
        <span style="color:#aeaeae">// mains = subs; // 배열 업캐스팅 : 배열 사이에도 부모-자식 관계가 성립한다.</span>

        <span style="color:#fbde2d">for</span>(<span style="color:#fbde2d">Main</span> m <span style="color:#fbde2d">:</span> mains)
        {
            <span style="color:#fbde2d">if</span>(m <span style="color:#fbde2d">instanceof</span> <span style="color:#fbde2d">Sub</span>)
                <span style="color:#fbde2d">System</span><span style="color:#fbde2d">.</span>out<span style="color:#fbde2d">.</span>println(<span style="color:#61ce3c">"Sub 객체 발견"</span>);
        }
    }

    <span style="color:#fbde2d">@Override</span>
    <span style="color:#fbde2d">public</span> <span style="color:#fbde2d">Main</span> <span style="color:#ff6400">clone</span>()
    {
        <span style="color:#aeaeae">// 얕은 복사가 필요하다면 Object.clone()을 이용한다.</span>
        <span style="color:#fbde2d">Main</span> main <span style="color:#fbde2d">=</span> <span style="color:#d8fa3c">null</span>;
        <span style="color:#fbde2d">try</span> {
            main <span style="color:#fbde2d">=</span> (<span style="color:#fbde2d">Main</span>)super<span style="color:#fbde2d">.</span>clone();
            main<span style="color:#fbde2d">.</span>string <span style="color:#fbde2d">=</span> <span style="color:#fbde2d">new</span> <span style="color:#fbde2d">String</span>(string);
        } <span style="color:#fbde2d">catch</span> (<span style="color:#fbde2d">CloneNotSupportedException</span> e) {
            e<span style="color:#fbde2d">.</span>printStackTrace();
        }
        <span style="color:#fbde2d">return</span> main;
    }

    <span style="color:#aeaeae">// equals()와 hashCode()를 함께 override해야한다.</span>
    <span style="color:#fbde2d">@Override</span>
    <span style="color:#fbde2d">public</span> <span style="color:#fbde2d">boolean</span> <span style="color:#ff6400">equals</span>(<span style="color:#fbde2d">Object</span> o)
    {
        <span style="color:#fbde2d">if</span>(o <span style="color:#fbde2d">==</span> this)
            <span style="color:#fbde2d">return</span> <span style="color:#d8fa3c">true</span>;
        <span style="color:#fbde2d">if</span>(<span style="color:#fbde2d">!</span>(o <span style="color:#fbde2d">instanceof</span> <span style="color:#fbde2d">Main</span>))
            <span style="color:#fbde2d">return</span> <span style="color:#d8fa3c">false</span>;
        <span style="color:#fbde2d">Main</span> main <span style="color:#fbde2d">=</span> (<span style="color:#fbde2d">Main</span>) o;
        <span style="color:#fbde2d">return</span> main<span style="color:#fbde2d">.</span>num <span style="color:#fbde2d">==</span> num <span style="color:#fbde2d">&amp;&amp;</span> main<span style="color:#fbde2d">.</span>string<span style="color:#fbde2d">.</span>equals(string);
    }

    <span style="color:#aeaeae">// hashCode() : 객체를 식별할 수 있는 32비트 정수를 반환.</span>
    <span style="color:#aeaeae">// 수정되지 않은 객체의 해시 코드는 일정해야 한다.</span>
    <span style="color:#aeaeae">// equals() 결과가 true면 해시 코드도 같아야 하고, false면 달라야 한다.</span>
    <span style="color:#fbde2d">@Override</span>
    <span style="color:#fbde2d">public</span> <span style="color:#fbde2d">int</span> <span style="color:#ff6400">hashCode</span>() {
        <span style="color:#fbde2d">return</span> (num <span style="color:#fbde2d">+</span> string)<span style="color:#fbde2d">.</span>hashCode();
    }

    <span style="color:#fbde2d">@Override</span>
    <span style="color:#fbde2d">public</span> <span style="color:#fbde2d">String</span> <span style="color:#ff6400">toString</span>()
    {
        <span style="color:#aeaeae">// default : 클래스 이름 + @ + 해시 코드</span>
        <span style="color:#fbde2d">return</span> <span style="color:#61ce3c">"num = "</span> <span style="color:#fbde2d">+</span> num <span style="color:#fbde2d">+</span> <span style="color:#61ce3c">", string"</span> <span style="color:#fbde2d">+</span> string;
    }

    <span style="color:#fbde2d">@Override</span>
    <span style="color:#fbde2d">public</span> <span style="color:#fbde2d">int</span> <span style="color:#ff6400">compareTo</span>(<span style="color:#fbde2d">Main</span> main) {
        <span style="color:#fbde2d">return</span> (num <span style="color:#fbde2d">+</span> string)<span style="color:#fbde2d">.</span>compareTo(main<span style="color:#fbde2d">.</span>num <span style="color:#fbde2d">+</span> main<span style="color:#fbde2d">.</span>string);
    }
}
</pre>